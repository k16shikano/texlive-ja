%#!uplatex
% TeX Live documentation.  Originally written by Sebastian Rahtz and
% Michel Goossens, now maintained by Karl Berry and others.
% Public domain.
\documentclass[uplatex,dvipdfmx]{jsarticle}

\usepackage{texlive-ja}

\title{{\huge {\TL ガイド 2019}}}

\author{%
  Karl Berry編 \\
  朝倉卓人 訳 \\[3mm]
  \url{https://tug.org/texlive/}
}

\date{2019年4月}

\begin{document}
\maketitle
\thispagestyle{empty}

\tableofcontents

\section{イントロダクション}\label{sec:intro}

\subsection{\TL と\TeX コレクション}

このドキュメントは\GNU/Linuxやその他のUNIXシステム，\macOS，Windows向けに
\TeX 関連プログラムを集めたディストリビューション\TL の概要について解説する
ものです．

この文書の読者は既にインターネット，{\TeX} Users Groupの配布する\TeX
コレクション\DVD またはその他の方法を利用して\TL を入手していることと思います．
\ref{sec:tl-coll-dists}節は\TeX コレクション\DVD の収録物について簡単に説明して
います．\TL と\TeX コレクションは{\TeX} Users Groupの協力によって維持されています．
このドキュメントは主として\TL それ自体を解説するものです．

\TL には\TeX, \LaTeXe, \ConTeXt, \MF, \MP, \BibTeX 実行プログラムはもちろん，
\TeX を拡張する多数のマクロパッケージやフォント，そしてそれらの付属ドキュメントが
含まれています．また，世界中で利用される様々な言語を対象とする組版もサポート
されています．

\TL のバージョンごとの主な変更点については，このドキュメントの末尾にある
\ref{sec:history}節 (\p.\pageref{sec:history}) をご覧ください．

\subsection{サポートOS}
\label{sec:os-support}

\TL には\GNU/Linux, \macOS, Cygwinを含む，多くのUNIXベースプラットフォーム向けの
バイナリを含んでいます．同梱されているソースを用いれば，デフォルトではサポート
されていないプラットフォームでコンパイルを行うこともできます．

Windows については，Windows~7以上のバージョンをサポートしています．いまのところ
Windows Vistaでも概ね動作すると思いますが，Windows XPよりも古いものについては
\TL のインストールすら成功しません．Windowsについては64-bit向けに個別の実行
ファイルを用意していませんが，32-bit実行ファイルは問題なく64-bit環境でも
動作するはずです．

Windowsおよび\macOS に特有のその他の事情については\ref{sec:tl-coll-dists}節を
参照してください．

\subsection{\TL のインストール（基本）}
\label{sec:basic}

\TL は\DVD またはインターネットを利用してインストールすることができます．
(\url{http://tug.org/texlive/acquire.html})．ネットインストーラ自体はとても
小さなプログラムで，これを実行すると必要とされるすべてのファイルを
インターネットからダウンロードします．

\DVD インストーラはあなたのローカルディスクに\TL をインストールします．
\TeX コレクション\DVD 上にある\TL のデータ（またはその\code{.iso}イメージ）
を直接実行することはできませんが，\USB ディスクなどにポータブルインストールを
行うことも可能です（\ref{sec:portable-tl}節参照）．インストールについては
後ほど詳述しますが (\p.\pageref{sec:install})，ここでは「クイックスタート」
として簡単に説明します：

\begin{itemize*}
\item インストールスクリプトの名称は\cmd{install-tl}です．このプログラムに\sopt{%
gui}オプションを与えると「GUIモード」（Windowsと\macOS でデフォルト），\sopt{no-%
gui}を与えると「テキストモード」（その他のプラットフォームでデフォルト）で実行され
ます．UNIXプラットフォームでは，Perl/Tkがインストールされていれば旧来のPerl/Tkと
wizardモードを利用することもできます．Windowsについては\ref{sec:wininst}節も参照
してください．

\item \TL をインストールすると「\TL マネージャ」(\cmd{tlmgr}) も利用可能になります．
インストーラと同様，このプログラムにも\GUI モードとテキストモードがあります．\TL
マネージャを用いてパッケージのインストールやアンインストール，その他さまざまな設定
タスクを実行することができます．
\end{itemize*}

\subsection{セキュリティについて}
\label{sec:security}

私たちの知る限り，\TeX の主要なプログラムそれ自体はとても堅牢です（今までもずっと
そうでした）．しかしながら，\TL に含まれる多数のサードパーティ製プログラムは，多く
の人の尽力があるとはいえ，それでも同じレベルに達していないかもしれません．一般論
ですが，信頼できない入力についてプログラムを実行する際は十分にお気をつけください．
なるべく安全に実行するためには，新しいサブディレクトリを作って実行したり，\cmd{%
chroot}を利用したりしてください．

この注意はWindowsについては特に重要です．なぜならWindowsは，検索パスの設定に
関わらず，常にカレントディレクトリにあるプログラムを他の何よりも優先して
実行するからです．この挙動は様々な攻撃に悪用される恐れがあります．我々は多くの
セキュリティホールを塞いできましたが，特にサードパーティ製プログラムについては，
間違いなくまだ残っているものが数多くあるでしょう．したがって，カレントディレクトリ
にある疑わしいファイル（特にバイナリとスクリプトファイル）は事前にチェックして
おくことを推奨します．悪意のあるファイルはそもそも存在するべきでありませんが，
単にドキュメントを処理するだけで生成されることなどあってはなりません．

最後に，\TeX （およびその周辺ツール）はドキュメントの処理中にファイル書き込みを
行うことができますが，その機能もまた様々な方法で利用され得ます．再度の注意に
なりますが，ご自身で作成されたわけではないドキュメントは，必ず新しい
サブディレクトリで実行するのが無難です．

\subsection{サポート情報}
\label{sec:help}

\TeX コミュニティはアクティブかつ親和的で，ほとんどの真剣な質問には回答を
得ることができます．しかしながら，こうしたサポートは非公式で，ボランティアや
一般の\TeX ユーザ有志によって行われているものですから，質問をする前にドキュメント
や過去のQ\&Aをよく読んで，まずはご自分で解決できるよう最善を尽くしましょう（もし
保証付きの有償サポートをご希望の場合は，\TL の利用は諦めて商用のシステムを
ご利用ください．\url{http://tug.org/interest.html#vendors}には\TeX に関連する
商用サービスを提供する団体の一覧があります）．

以下に\TeX 関連の情報源をリストアップにしておきます．順番は概ねおすすめ順です：
%
\begin{description}
\item[はじめての方へ]
これからはじめて\TeX をお使いになる場合は\url{http://tug.org/begin.html}に
アクセスするとよいでしょう．\TeX システムについて簡潔なイントロダクションを
読むことができます．

\item[{\TeX} FAQ]
\TeX に関するよくあるFAQを集めた巨大なデータベースです．最も基礎的な質問から
とても難解な質問まで含まれています．\TL では\OnCD{texmf-dist/doc/generic/FAQ-en/}
に含まれているほか，インターネット経由でも読むことができます (\url{%
http://www.tex.ac.uk/faq})．\TeX について質問がある場合は，まずここをチェック
してください．

\item[\TeX カタログ]
特定の\TeX パッケージやフォント，プログラム等を見つけたい場合は\TeX カタログを
探すとよいでしょう．これは\TeX 関連の成果物を集めた巨大なコレクションです．
\url{http://ctan.org/pkg/catalogue/}にアクセスしてみてください．

\item[ウェブ上の情報源]
ウェブサイト\url{http://tug.org/interest.html}には多数の\TeX 関連リンクが
集められています．特に\TeX システムに関わるさまざまな話題についての多くの書籍，
マニュアル，投稿記事を多数紹介しています．

\item[サポート・アーカイブ]
\LaTeX コミュニティ\url{http://latex-community.org/}やQ\&Aサイト
\url{http://tex.stackexchange.com}，Usenetニュースグループ
\url{news:comp.text.tex}，メーリングリスト\email{texhax@tug.org}などは
\TeX コミュニティの擁する主なサポートフォーラムです．これらのアーカイブには
過去数十年分の質問と回答が蓄積されています．特に後者2つのアーカイブは
\url{http://groups.google.com/group/comp.text.tex/topics}と
\url{http://tug.org/mail-archives/texhax}にて閲覧できます．また，より一般の
検索エンジン（\url{http://google.com}など）ももちろん有用です．

\item[質問する]
もし答えの見つからない質問にぶつかったときは，\url{http://latex-community.org/}%
や\url{http://tex.stackexchange.com/}，Googleグループ\dir{comp.text.tex}あるいは
メーリングリスト\email{texhax@tug.org}に質問を投稿することもできます．ただし，
どこで質問を投稿するにしても，必ず事前に「質問のしかた」(\url{https://texfaq.org%
/FAQ-askquestion}) を読むようにしましょう．このインストラクションに従うことで，
有効な回答を得られる可能性を飛躍的に高めることができます．

\item[\TL サポート]
もし\TL ディストリビューションに関してバグ報告や提案，コメントがある場合は
\TL メーリングリスト\email{tex-live@tug.org}にメールを投稿してください．ただし
\TL に含まれる個別のプログラムの使い方についての質問等は，\TL メーリングリスト
ではなく，各プログラムのメンテナや専用のメーリングリストにご連絡ください．
多くの場合，プログラムを\lopt{help}オプション付きで実行するとバグ報告用の
メールアドレスを確認することができます．
\end{description}
%
以上のリストは主に英語での情報提供・コミュニケーションを行う場所ですが，日本語
でのサポートが必要な場合は，次のようなウェブサイトが利用できます：
%
\begin{description}
\item[{\TeX} Wiki]
\url{https://texwiki.texjp.org/}は日本語で読めるものとしては\TeX 関連情報を集めた
最大の情報源です．現在は日本語\TeX 開発コミュニティ (texjporg) がサーバ管理を
行っていますが，あくまでWikiなので編集は誰でも行うことができ，掲載情報は必ずしも
公式のものではありません．

\item[{\TeX} Forum]
\url{https://oku.edu.mie-u.ac.jp/tex/}は歴史の長いQ\&Aサイトで，現在も日本語で\TeX
に関連する質問ができる場所としては最もアクティブユーザが多く，熟練の\TeX ユーザが
多数参加しています．上記{\TeX} Wikiに日本語版の「質問のしかた」
(\url{https://texwiki.texjp.org/?質問のしかた}) ページがありますので，初めて質問を
投稿する場合は，必ず目を通すようにしましょう．

\item[スタック・オーバーフロー]
\url{https://ja.stackoverflow.com/}は\TeX に限らずあらゆる技術・プログラミング
関連の質問を投稿することができるQ\&AサイトStack Overflowの日本語版です．最近は
ここの\LaTeX タグ (\url{https://ja.stackoverflow.com/questions/tagged/latex})
にも少しずつ\TeX/\LaTeX 関連の質問が投稿されるようになってきています．
\end{description}

\TeX ユーザは上記のような場所でサポートを受けることができる一方で，あなた自身が
他の質問者の手助けをすることも可能です．いずれのコミュニティも全世界に開かれた
ものですから，ぜひお気軽に参加・購読し，ヘルプが必要なユーザを助けてあげましょう．

\section{\TL の概要}
\label{sec:overview-tl}

このセクションでは\TL と\TeX コレクションの収録物について紹介します．

\subsection{\TeX コレクション: \TL, pro\TeX{}t, Mac\TeX}
\label{sec:tl-coll-dists}

\TeX コレクション\DVD には以下のものが含まれています：

\begin{description}
\item[\TL]
ディスクにインストールするための完全な\TeX システム（ディストリビューション）
です．ウェブサイト：\url{http://tug.org/texlive/}

\item[Mac\TeX]
\macOS 向けの\TeX ディストリビューションで，専用のインストーラといくつかの
Mac用アプリケーションを\TL に追加しています．
ウェブサイト：\url{http://tug.org/mactex/}

\item[\ProTeXt]
\MIKTEX ディストリビューションのWindows向け拡張です．\ProTeXt は\MIKTEX に
いくつかのツールを追加しているほかインストール手順を簡略化しています．
これは完全に\TL とは独立で，独自の導入ガイドがあります．
ウェブサイト：\url{http://tug.org/protext/}

\item[\CTAN]
\CTAN リポジトリ (\url{http://www.ctan.org/}) のスナップショットです．
\end{description}

\CTAN および\pkg{protext}は\TL と同じライセンスで配布されているわけでは
ないので，再配布や変更を行う場合は十分にご注意ください．

\subsection{\TL のトップレベルディレクトリ}
\label{sec:tld}

ここに\TL ディストリビューションのトップレベル（最上位階層）にあるディレクトリ
の一覧を示し，それぞれについて簡単に説明しておきます．
%
\begin{description}
\item[\dir{bin}]
\TeX 関連プログラムを格納しています．実行バイナリはプラットフォームによって
異なります．

\item[\dir{readme-*.dir}]
\TL の概要と有用なリンクを集めた多言語のREADMEを含んでいます．HTMLバージョンと
テキストバージョンがあります．

\item[\dir{source}]
\TL に含まれるすべてのプログラムのソースコードです．\Webc で記述された，\TeX
ディストリビューションのコアプログラムのものも含みます．

\item[\dir{texmf-dist}]
最も重要なTEXMFツリーです．詳しくは下にある\dir{TEXMFDIST}の項目をご覧ください．

\item[\dir{tlpkg}]
インストールに必要なスクリプトやWindows向けのサポートプログラムを含んでいます．
\end{description}
%
%In addition to the directories above, the installation scripts and
%\file{README} files (in various languages) are at the top level of
%the distribution.
%
ドキュメントを探す際には，同じくトップレベルにある\OnCD{doc.html}が役立ちます．
このファイルには\dir{texmf-dist/doc}以下に含まれるほとんどすべてのドキュメント
（パッケージ，フォーマット，フォント，プログラムのマニュアルやmanページなど）が
掲載されています．また\TL に含まれるドキュメントを検索するには\cmd{texdoc}%
コマンドを利用することもできます．

この\TL ガイド自体は\dir{texmf-dist/doc/texlive}以下にあり，多数の言語に翻訳
されています：

\begin{itemize*}
\item チェコ・スロバキア語：\OnCD{texmf-dist/doc/texlive/texlive-cz}
\item ドイツ語\OnCD{texmf-dist/doc/texlive/texlive-de}
\item 英語：\OnCD{texmf-dist/doc/texlive/texlive-en}
\item フランス語：\OnCD{texmf-dist/doc/texlive/texlive-fr}
\item イタリア語：\OnCD{texmf-dist/doc/texlive/texlive-it}
\item ポーランド語：\OnCD{texmf-dist/doc/texlive/texlive-pl}
\item ロシア語：\OnCD{texmf-dist/doc/texlive/texlive-ru}
\item セルビア語：\OnCD{texmf-dist/doc/texlive/texlive-sr}
\item 簡体字中国語：\OnCD{texmf-dist/doc/texlive/texlive-zh-cn}
\end{itemize*}

\subsection{いろいろなTEXMFツリー（概要）}
\label{sec:texmftrees}

このセクションではシステムに利用される種々のTEXMFツリーを指定するために予め
定義されている変数を一覧にします．これらのTEXMFツリーはそれぞれに使用目的が
あり，また\TL のデフォルト構成を示すものでもあります．コマンド\code{tlmgr~%
conf}を実行するとこれらの変数の値が表示されるので，各TEXMFツリーがあなたの
コンピュータで実際にどのディレクトリを指し示すのか容易に確認することができ
ます．

すべてのTEXMFツリーは，例え個人的なものであっても，標準的な\TeX の
ディレクトリ構成 (\TDS, \url{http://tug.org/tds}) にしたがうべきです．
ただし必要のないサブディレクトリやファイルは存在していなくても構いません．
詳細については\ref{sec:local-personal-macros}節 (\p.\pageref{%
sec:local-personal-macros}) を参照してください．ここで列挙するのはツリー
が検索される順序の逆順です．つまり，より後に登場するツリーによって，
それより前のツリーの内容は上書きされます．
%
\begin{description}
\item[\code{TEXMFDIST}]
このツリーには\TL ディストリビューション自体に含まれるほとんどのファイル
（設定ファイル，スクリプト，パッケージ，フォント，etc.）が配置されています．
（主な例外はプラットフォーム毎の実行バイナリで，それらはトップレベルの
\dir{bin}ディレクトリに配置されています．）

\item[\code{TEXMFSYSVAR}]
この（システム用の）ツリーは\cmd{texconfig-sys}, \cmd{updmap-sys}, \cmd{%
fmtutil-sys}, \cmd{tlmgr}などが，フォーマットや生成されたmapファイルなどの
実行時（キャッシュ）データを保存するためのものです．

\item[\code{TEXMFSYSCONFIG}]
この（システム用の）ツリーは\cmd{texconfig-sys}, \cmd{updmap-sys}, \cmd{%
fmtutil-sys}などが，変更された設定データを保存するために利用するものです．

\item[\code{TEXMFLOCAL}]
このツリーは，システム管理者が全ユーザに適用するためにマクロやフォントなどを
追加または更新して配置するためのものです．

\item[\code{TEXMFHOME}]
このツリーは，一般のユーザが独自に追加または更新したいマクロやフォントを
配置するためのものです．この変数の展開結果は，使用するユーザに合わせて動的に
変化します．

\item[\code{TEXMFVAR}]
この（ユーザ向けの）ツリーは\cmd{texconfig}, \cmd{updmap}, \cmd{fmtutil}など
がフォーマットや生成されたmapファイルなどの実行時（キャッシュ）データを保存
するためのものです．

\item[\code{TEXMFCONFIG}]
この（ユーザ向けの）ツリーは\cmd{texconfig}, \cmd{updmap}, \cmd{fmtutil}など
が変更された設定データを保存するために利用するものです．

\item[\code{TEXMFCACHE}]
このツリーは\ConTeXt\ MkIVおよびLua\LaTeX が実行時（キャッシュ）データを保存
するためのものです．デフォルトでは\code{TEXMFSYSVAR}（またはこれが書き込み
不能な場合は\code{TEXMFVAR}）に設定されています．
\end{description}

\noindent
デフォルトの\TL 構成：
%
\begin{description}
\item[システム用ルート] 複数の\TL を配置できます
  （デフォルト値はUNIXでは\dir{/usr/local/texlive}）
  \begin{description}
  \item[\dir{2018}] 前年のリリース
  \item[\dir{2019}] 最新のリリース
    \begin{description}
    \item[\dir{bin}] ~
      \begin{description}
      \item[\dir{i386-linux}] \GNU/Linux向けバイナリ (32-bit)
      \item[\quad\vdots]
      \item[\dir{x86_64-darwin}] \macOS 向けバイナリ
      \item[\dir{x86_64-linux}] \GNU/Linux向けバイナリ (64-bit)
      \item[\dir{win32}] Windows向けバイナリ
      \end{description}
    \item[\dir{texmf-dist}] \code{TEXMFDIST}, \code{TEXMFMAIN}
    \item[\dir{texmf-var}] \code{TEXMFSYSVAR}, \code{TEXMFCACHE}
    \item[\dir{texmf-config}] \code{TEXMFSYSCONFIG}
    \end{description}
  \item[\dir{texmf-local}] \code{TEXMFLOCAL}（リリースに依存しません）
  \end{description}
\item[ユーザのホームディレクトリ] （\code{\$HOME}または\code{\%USERPROFILE\%}）
  \begin{description}
  \item[\dir{.texlive2018}] 前年リリースに適用するユーザごとのデータ（設定や生成物）
  \item[\dir{.texlive2019}] 最新リリースに適用するユーザごとのデータ（設定や生成物）
    \begin{description}
    \item[\dir{texmf-var}] \code{TEXMFVAR}, \code{TEXMFCACHE}
    \item[\dir{texmf-config}] \code{TEXMFCONFIG}
    \end{description}
  \item[\dir{texmf}] \code{TEXMFHOME}（ユーザごとのマクロなどを配置）
  \end{description}
\end{description}

\subsection{\TeX の拡張エンジン}
\label{sec:tex-extensions}

Knuthによるオリジナルの\TeX は既に開発が終了しており，ごく稀にバグ修正が
入る程度です．\TL には現在もこのオリジナル処理系が\cmd{tex}として含まれており，
この状況は当面の間は変わることはないでしょう．一方で，\TL にはいくつかの\TeX を
拡張したエンジン（それらも\TeX 処理系と呼ばれています）も収録されています：
%
\begin{description}
\item[\eTeX]
この処理系ではいくつかの追加プリミティブ（主としてマクロ展開，文字列スキャン，
マークのクラス，デバッグに関わるもの）と双方向組版のための\TeXXeT 拡張が利用可能
です．デフォルトモードでは，\eTeX はオリジナルの\TeX と完全な互換性があります．
詳細については\OnCD{texmf-dist/doc/etex/base/etex_man.pdf}を参照してください．

\item[\pdfTeX]
この処理系には，\eTeX の機能に加えて\DVI 同様にPDFを出力する機能と，その他出力とは
関係のない多数の追加機能が搭載されています．この処理系は，\cmd{etex}, \cmd{latex},
\cmd{pdflatex}など多くのフォーマット（コマンド）から呼び出されています．pdf\TeX の
ウェブサイトは\url{http://www.pdftex.org/}です．\TL にはマニュアル (\OnCD{texmf-%
dist/doc/pdftex/manual/pdftex-a.pdf}) とpdf\TeX の拡張機能の利用例を示した文書 (%
\OnCD{texmf-dist/doc/pdftex/samplepdftex/samplepdf.tex}) も収録されています．

\item[\LuaTeX]
\pdfTeX の後継として開発されているもので，（完全ではありませんが）概ね後方互換性が
あります．またAlephの上位互換となることも目標になっていますが，これについても完全な
互換性があるわけではありません．この\TeX エンジンには軽量スクリプト言語Lua (\url{%
http://www.lua.org/}) のインタプリタが組み込まれており，\TeX における厄介な問題に
対処するのにとても役立ちます．\cmd{texlua}として呼び出した場合は独立のLua処理系の
ように振る舞います．そのため\TL に含まれる一部のプログラムもこのLua処理系によって
実行されています．ウェブサイト：\url{http://www.luatex.org/}，マニュアル：\OnCD{%
texmf-dist/doc/luatex/base/luatex.pdf}．

\item[\XeTeX]
Unicodeによる入力とOpenTypeフォントおよびシステムフォントの利用を，サードパーティ
製のライブラリを利用してサポートする\TeX 処理系です．
ウェブサイト：\url{http://tug.org/xetex}．

\item[{\OMEGA} (Omega)]
Unicode（16-bit文字）ベースの処理系で，すなわち世界中のほとんどあらゆる言語で
用いられる文字に対応しています．この処理系はいわゆる `\OMEGA{} Translation
Processes' (OTPs) もサポートしており，任意の入力について複雑な組版処理を施すことも
可能です．

\item[{\ALEPH} (Aleph)]
\OMEGA と\eTeX を組み合わせた処理系です．詳細については\OnCD{texmf-dist/doc/aleph/%
base}を参照してください．
\end{description}
%
上記の\TeX 処理系は主として欧文組版を行うために開発されたもので，そのままでは日本語
の組版には適しません．幸い\TL には日本語組版を行うために拡張されたエンジンもいくつか
収録されています：
%
\begin{description}
\item[\pTeX]
Knuthによるオリジナルの\TeX 処理系を日本語組版用に拡張したものです．和文フォントを
扱うことができるように拡張されているほか，禁則処理や縦組みにも対応しています．詳細に
ついては\OnCD{texmf-dist/doc/ptex/ptex-manual/ptex-manual.pdf}を参照してください．

\item[\upTeX]
\pTeX の派生エンジンで，内部コードがUnicodeに変更されています．基本的には\upTeX は
\pTeX の上位互換となっており，UTF-8入力が活用できるほかにもいくつかの機能が追加
されています．

\item[\epTeX, \eupTeX]
\pTeX と\upTeX に\eTeX 相当の拡張機能を追加したエンジンです．現在\TL に含まれる
\cmd{platex}, \cmd{uplatex}コマンドではデフォルトでこれらの処理系が呼び出されます．
最近は\pdfTeX 由来の機能も一部利用できます．詳細は\OnCD{texmf-dist/doc/ptex/ptex-%
base/eptexdoc.pdf}をご覧ください．
\end{description}
%
また\LuaTeX-jaというマクロパッケージを用いると\LuaTeX でも日本語組版を実現できます．
詳しくはウェブサイト\url{https://ja.osdn.net/projects/luatex-ja/}またはドキュメント
\OnCD{texmf-dist/doc/luatex/luatexja/luatexja-ja.pdf}を参照してください．

\subsection{\TL に含まれるその他の著名なソフトウェア}

ここに少しですが，\TL に含まれていて，よく利用されるプログラムを列挙しておきます：
%
\begin{cmddescription}
\item[bibtex, biber]
参考文献リストの作成を補助するプログラム．

\item[pbibtex, upbibtex]
\cmd{bibtex}を日本語用に拡張したもの．

\item[makeindex, xindy]
索引の作成を補助するプログラム．

\item[mendex, upmendex]
\cmd{makeindex}を日本語用に拡張したもの．

\item[dvips]
\DVI を\PS に変換するプログラム．

\item[xdvi]
X Windowsシステム向けの\DVI ビューア．

\item[dviconcat, dviselect]
\DVI のページを切り貼りするためのプログラム．

\item[dvipdfmx]
\DVI をPDFに変換するプログラム．

\item[psselect, psnup, \ldots]
\PS ユーティリティ．

\item[pdfjam, pdfjoin, \ldots]
PDFユーティリティ．

\item[context, mtxrun]
\ConTeXt とPDFプロセッサ．

\item[htlatex, \ldots]
\cmd{tex4ht}は\AllTeX をHTMLやXMLに変換するプログラム．
\end{cmddescription}

\section{\TL のインスール}
\label{sec:install}

\subsection{インストーラの入手と起動}
\label{sec:inst-start}

\TL をインストールするためには，まず\TeX コレクション\DVD を入手するか\TL の
インターネット・インストーラをダウンロードします．より詳細な情報や\TL を入手
するその他の方法については\url{http://tug.org/texlive/acquire.html}を参照して
ください．
%
\begin{description}
\item[インターネット・インストーラ（\code{.zip}または\code{.tar.gz}）]
\CTAN の\dir{systems/texlive/tlnet}配下からダウンロードできます．\url{http://%
mirror.ctan.org/systems/texlive/tlnet}にアクセスすると，最寄りの最新ミラーに
リダイレクトされるはずです．\file{install-tl.zip}（UNIXおよびWindows向け），
またはそれよりもかなりファイルサイズの小さい\file{install-unx.tar.gz}（UNIX%
専用）のお好きな方をダウンロードしてください．ダウンロードしたアーカイブを展開
すると\dir{install-tl}サブディレクトリ以下に\file{install-tl}および\file{%
install-tl-windows.bat}が見つかるはずです．

\item[インターネット・インストーラ（Windows用\code{.exe}）]
上と同様に\CTAN からダウンロードし，ダブルクリックしてください．すると，
インストーラの最初の画面（図\ref{fig:nsis}）が表示されるはずです．この画面では
「インストール」または「展開のみ」のいずれかを選ぶことができます．

\item[\TeX コレクション\DVD]
\DVD 内の\dir{texlive}サブディレクトリを開いてください．Windowsでは，通常\DVD
を挿入するとインストーラが自動的に起動するはずです．{\TeX} Users Group (TUG) の
会員になるか (\url{http://tug.org/usergroups.html})，TUGのオンラインストア
(\url{http://tug.org/store}) で個別に購入すると\DVD を手に入れることができます．
また，配布されている\ISO イメージからご自身で\DVD に焼くことも可能です．\DVD
または\ISO から\TL をインストールした後，インターネットを利用して継続的にアップ
デートを行いたい場合は\ref{sec:dvd-install-net-updates}節をご覧ください．
\end{description}
%
\begin{figure}[tb]
\tlpng{nsis_installer}{.6\linewidth}
\caption{Windows用インストーラ (\code{.exe}) の初期画面．}
\label{fig:nsis}
\end{figure}

いずれの手段でインストーラを入手しても，まったく同じプログラムが起動します．
入手方法の違いによって生じる差異のうち，ユーザにとって最も重要なことは，
インターネット・インストーラを利用した場合はすべてのパッケージについて入手可能
な最新バージョンがインストールされますが，\DVD や\ISO イメージを用いた場合には
年に1度のパブリックリリース時点での最新版がインストールされるということです．

もしプロキシを利用してダウンロードする必要がある場合は，\file{~/.wgetrc}ファイル
または環境変数を利用してWgetに対して適切なプロキシ設定を行うか (\url{http://www%
.gnu.org/software/wget/manual/html_node/Proxies.html})，もしくはお好みで別の
ダウンロード用ツールをご利用ください．\DVD や\ISO イメージからインストールを行う
場合は，プロキシ設定について気にする必要はありません．

以降のセクションでは，このインストーラの使い方について詳しく説明します．

\subsubsection{UNIX}

以降では\code{>}はシェル・プロンプトを表し，ユーザの入力はタイプライタ体で
\Ucom{command}のように表現することにします．\TL のインストーラ\cmd{install-%
tl}はPerlスクリプトです．UNIX互換なシステムでこのスクリプトを起動する最も簡単
な方法は以下を実行することです：
%
\begin{alltt}
> \Ucom{perl /path/to/installer/install-tl}
\end{alltt}
%
（もちろん，実行権限を与えていれば単に\Ucom{/path/to/installer/install-tl}と
して起動することもできますし，事前に\cmd{cd}で\cmd{install-tl}のある
ディレクトリに移動しても構いません．以降では，そのようなバリエーションについて
逐一言及はしません．）
%
ところで，インストーラのメッセージを見やすく表示するためには，ターミナルの
ウィンドウサイズは十分に大きくしておいてください（図\ref{fig:text-main}）．

インストーラを\GUI モードで起動するためには，予めTcl/Tkをインストールしておく
必要があります．その上で，次のようにすると\GUI モードで起動できます：
%
\begin{alltt}
> \Ucom{perl install-tl -gui}
\end{alltt}

古い\code{wizard}モードや\code{perltk}/\code{expert}オプションは，現在も使用
可能です．これらはXFTサポートありでコンパイルされた\code{Perl::Tk}モジュールを
必要とします．この要件は，基本的には\GNU/Linuxでは問題になりませんが，他の
プラットフォームでは問題かもしれません．利用可能なすべてのオプションを確認する
には次を実行してください：
%
\begin{alltt}
> \Ucom{perl install-tl -help}
\end{alltt}

\paragraph{UNIXのパーミッションについて}
\TL インストーラは，実行時の\cmd{umask}設定を反映します．したがって，もし利用
中のユーザだけでなく他のユーザも利用可能な形で\TL をインストールしたい場合は，
\code{umask 002}など適切なパーミッション設定になっているかよくご確認ください．
\cmd{umask}コマンドの詳細については，システムのマニュアルを参照してください．

\paragraph{Cygwinへの注意}
他のUNIX互換システムと異なり，Cygwinにはデフォルトでは\TL インストーラの実行に
必要なプログラムの一部が含まれていません．詳細は\ref{sec:cygwin}節を参照して
ください．

\subsubsection{\macOS}
\label{sec:macos}

\ref{sec:tl-coll-dists}節でも言及したように，\macOS にはMac\TeX という専用の
ディストリビューションがあります (\url{http://tug.org/mactex})．Mac\TeX の
インストーラは\macOS 向けにいくつかの最適化をしている（たとえば，いわゆる
「{\TeX}Distデータ構造」を利用して複数の\macOS 向け\TeX ディストリビューション
(Mac\TeX, Fink, MacPorts, \ldots) を簡単に切り替える機能があります）ので，\TL
インストーラを利用するよりも，Mac\TeX を利用したインストールをおすすめします
（訳注：ただし敢えて\TL インストーラを利用することも可能です）．

Mac\TeX は完全な\TL ベースのディストリビューションで，主要な\TeX ツリーと
含まれる実行バイナリはまったく同一です．通常の\TL に，\macOS 専用のドキュメント
とアプリケーションがいくつか追加されています．

\subsubsection{Windows}\label{sec:wininst}

もしZIPファイルをご自身でダウンロードして展開した場合や\DVD を挿入しても自動的に
インストーラが起動しなかった場合は，\file{install-tl-windows.bat}をダブルクリック
してください．

もしくは，コマンドプロンプトを利用してインストーラを起動することも可能です．以下
では\code{>}はプロンプトを表し，ユーザの入力はタイプライタ体で\Ucom{command}の
ように表現することにします．もし，既にインストーラのあるディレクトリにいる場合は
単に
%
\begin{alltt}
> \Ucom{install-tl-windows}
\end{alltt}
%
を実行してください．もちろん絶対パスを指定して起動することも可能です．例えば，
\TeX コレクション\DVD を利用していて，その光学ドライブが\dir{D:}であれば：
%
\begin{alltt}
> \Ucom{D:{\bs}texlive{\bs}install-tl-windows}
\end{alltt}
%
図\ref{fig:basic-w32}は\GUI インストーラ（Windowsではデフォルト）の初期画面を
示しています．

テキストモードでのインストールを行いたい場合は次のようにしてください：
%
\begin{alltt}
> \Ucom{install-tl-windows -no-gui}
\end{alltt}

すべてのオプションを表示するには以下を実行してください：
%
\begin{alltt}
> \Ucom{install-tl-windows -help}
\end{alltt}

\begin{figure}[tb]
\begin{boxedverbatim}
Installing TeX Live 2019 from: ...
Platform: x86_64-linux => 'GNU/Linux on x86_64'
Distribution: inst (compressed)
Directory for temporary files: /tmp
...
 Detected platform: GNU/Linux on Intel x86_64
 
 <B> binary platforms: 1 out of 16

 <S> set installation scheme: scheme-full

 <C> customizing installation collections
     40 collections out of 41, disk space required: 5829 MB

 <D> directories:
   TEXDIR (the main TeX directory):
     /usr/local/texlive/2019
   ...

 <O> options:
   [ ] use letter size instead of A4 by default
   ...
 
 <V> set up for portable installation

Actions:
 <I> start installation to hard disk
 <P> save installation profile to 'texlive.profile' and exit
 <H> help
 <Q> quit
\end{boxedverbatim}
\vskip-\baselineskip
\caption{\TL インストーラのテキストモードでのメイン画面 (\GNU/Linux)}
\label{fig:text-main}
\end{figure}

\begin{figure}[tb]
\tlpng{basic-w32}{.6\linewidth}
\caption{\TL インストーラの基本画面 (Windows)．「Advanced」ボタンを押すと図\ref{%
fig:advanced-lnx}のような画面に切り替わります．}\label{fig:basic-w32}
\end{figure}

\begin{figure}[tb]
\tlpng{advanced-lnx}{\linewidth}
\caption{\TL インストーラ\GUI モードの「高度な設定」画面 (\GNU/Linux)}
\label{fig:advanced-lnx}
\end{figure}

\subsubsection{Cygwin}
\label{sec:cygwin}

Cygwinでは，\TL のインストールを始める前に\file{setup.exe}プログラムを用いて
（もし未導入の場合は）\prog{perl}と\prog{wget}をインストールするようにしてくだ
さい．また以下のパッケージも予めインストールしておくことをおすすめします：
%
\begin{itemize*}
\item \prog{fontconfig}（\XeTeX と\LuaTeX のため）
\item \prog{ghostscript}（多くの\TeX エンジンのため）
\item \prog{libXaw7}（\prog{xdvi}のため）
\item \prog{ncurses}（インストーラの\code{clear}コマンドの実行に必要）
\end{itemize*}

\subsubsection{テキストモード}

図\ref{fig:text-main}はUNIXにおけるテキストモードのメイン画面を示しています．
テキストモードはUNIXではデフォルトです．

このモードは，完全にコマンドラインで完結するもので，カーソルによる操作のサポートは
まったくありません．例えば，Tabキーによってチェックボックスや入力フォーム間を移動
することはできません．インストール操作はすべて，プロンプトに文字をタイプ（大文字と
小文字は区別されます）してEnterキーを押すことによって行います．ターミナルの画面は，
入力にしたがって適切に遷移していきます．

テキストモードのインターフェースは，最小限のPerlしかない環境を含めなるべく多く
のプラットフォームで動作するようとても原始的に作られています（訳注：\GUI モード
は日本語を含む多言語に対応していますが，テキストモードは英語のみです）．

\subsubsection{\GUI モード}
\label{sec:graphical-inst}

\GUI モードでは，デフォルトではわずかなオプションのみを提供するシンプルな画面で
スタートします（図\ref{fig:basic-w32}）．\GUI モードを起動するには
%
\begin{alltt}
> \Ucom{install-tl -gui}
\end{alltt}
%
を実行します．「Advanced」ボタンを押すとテキストモードとほぼ同程度のオプションを
提供する画面に切り替わります（図\ref{fig:advanced-lnx}）．

\subsubsection{その他のレガシーなモード}

古い\code{perltk}モード，\code{expert}モード，\code{wizard}モードは現在もPerl/Tkが
インストールされていれば利用可能です．これらはそれぞれインストーラに\sopt{gui=%
perltk}や\sopt{gui=wizard}オプションを与えると起動できます．

\subsection{インストーラの操作方法}
\label{sec:runinstall}

インストーラは直感的に操作できるように設計されていますが，このセクションでは多様な
オプションやサブメニューについて簡単に説明します．

\subsubsection{バイナリ選択メニュー（UNIXのみ）}
\label{sec:binary}

\begin{figure}[tb]
\begin{boxedverbatim}
Available platforms:
===============================================================================
   a [ ] Cygwin on Intel x86 (i386-cygwin)
   b [ ] Cygwin on x86_64 (x86_64-cygwin)
   c [ ] MacOSX current (10.12-) on x86_64 (x86_64-darwin)
   d [ ] MacOSX legacy (10.6-) on x86_64 (x86_64-darwinlegacy)
   e [ ] FreeBSD on x86_64 (amd64-freebsd)
   f [ ] FreeBSD on Intel x86 (i386-freebsd)
   g [ ] GNU/Linux on ARM64 (aarch64-linux)
   h [ ] GNU/Linux on ARMhf (armhf-linux)
   i [ ] GNU/Linux on Intel x86 (i386-linux)
   j [X] GNU/Linux on x86_64 (x86_64-linux)
   k [ ] GNU/Linux on x86_64 with musl (x86_64-linuxmusl)
   l [ ] NetBSD on x86_64 (amd64-netbsd)
   m [ ] NetBSD on Intel x86 (i386-netbsd)
   o [ ] Solaris on Intel x86 (i386-solaris)
   p [ ] Solaris on x86_64 (x86_64-solaris)
   s [ ] Windows (win32)
\end{boxedverbatim}
\vspace{-1zh}
\caption{バイナリ選択メニュー}\label{fig:bin-text}
\end{figure}

図\ref{fig:bin-text}はテキストモードのバイナリ選択メニューを示しています．デフォルト
ではインストーラ実行時にご使用中のプラットフォーム向けのバイナリだけがインストール
されます．このメニューを利用すると，その他のプラットフォーム向けのバイナリも同様に
インストールすることを選択することができます．このメニューは\TeX ツリーを様々な環境
に共通のネットワークで共有する場合やデュアルブートシステムでは有用です．

\subsubsection{スキーム・コレクションの選択}
\label{sec:components}

\begin{figure}[tbh]
\begin{boxedverbatim}
Select scheme:
===============================================================================
 a [X] full scheme (everything)
 b [ ] medium scheme (small + more packages and languages)
 c [ ] small scheme (basic + xetex, metapost, a few languages)
 d [ ] basic scheme (plain and latex)
 e [ ] minimal scheme (plain only)
 f [ ] ConTeXt scheme
 g [ ] GUST TeX Live scheme
 h [ ] infrastructure-only scheme (no TeX at all)
 i [ ] teTeX scheme (more than medium, but nowhere near full)
 j [ ] custom selection of collections
\end{boxedverbatim}
\vspace{-1zh}
\caption{スキーム選択メニュー}\label{fig:scheme-text}
\end{figure}

図\ref{fig:scheme-text}は\TL のスキーム選択メニューです．これによって，お好きな
スキーム（パッケージコレクションのセット）を選んでインストールを行うことができます．
デフォルトでは\TL で利用可能なすべてのパッケージを含む\pkg{full}スキームが
インストールされます．おすすめはこの\pkg{full}スキームですが，純粋なplain \TeX
と\LaTeX だけを使用するなら\pkg{basic}，それに少しプログラムを追加したものである
\pkg{small}（これはMac\TeX におけるBasic\TeX と同等です），単なるテスト目的なら
\pkg{minimal}，あるいはそれらの中間にあたるものが欲しければ\pkg{medium}や
\pkg{teTeX}スキームを選択することもできます．その他にも，多数の目的別もしくは
言語別のスキームが用意されています．

\begin{figure}[tb]
\centering \tlpng{stdcoll}{.7\linewidth}
\caption{コレクション選択メニュー}\label{fig:collections-gui}
\end{figure}

コレクション選択メニュー（図\ref{fig:collections-gui}）を活用すると選択したスキーム
をさらに利用目的に応じて最適化することができます（訳注：\pkg{full}スキーム以外
のスキームには日本語組版に必要な\pTeX 系エンジンや\LuaTeX-jaなどは含まれていません．
したがって\pkg{full}スキーム以外のスキームを選択した場合，日本語組版を行うため
には原則としてJapaneseコレクション (\pkg{collection-langjapanese}) を追加する
必要があります）．

コレクションはスキームよりも細かなパッケージのセットです．基本的には，スキームという
のはいくつかのコレクションを集めたもので，コレクションは1つまたは複数のパッケージを
まとめたものです．パッケージは\TL におけるプロダクトの最小単位で，具体的には実際の
\TeX マクロファイルやフォントファイルから成るものです．

もしコレクション選択メニューが提供するよりもさらに細かくインストールするものを制御
したい場合は，インストール後に\TL マネージャ (\cmd{tlmgr}) を使用してください．
\TL マネージャを利用すればパッケージ単位でインストールを行うことが可能です．

\subsubsection{インストール先ディレクトリ}
\label{sec:directories}

デフォルトの\TL 構成については\ref{sec:texmftrees}節 (\p.\pageref{sec:texmftrees})
で説明しました．デフォルトのインストール先はUNIXでは\dir{/usr/local/texlive/2019}，
Windowsでは\winpath{\winenv{SystemDrive}\\texlive\\2019}です．この配置は複数の\TL
を同時にインストールすることを可能にします．例えば複数のリリース（典型的には，年度
ごと）の\TL をインストールしておき，単純に検索パスを変更することによってどの
リリースを使用するか切り替えるようなことができます．

インストール先のディレクトリはインストーラにおける\code{TEXDIR}を設定することに
よって変更することができます．\GUI モードで\code{TEXDIR}やその他のオプションを設定
するための画面は図\ref{fig:advanced-lnx}に示されています．インストール先を変更する
必要があるのは，デフォルトのインストール先にあたるパーティションに十分な空き容量が
ない場合（\TL をフルインストールするには数GBの容量が必要となります）や書き込み権限
がない場合です（\TL をインストールするのに管理者 (root) 権限は必要ありませんが，
インストール先ディレクトリへの書き込み権限は必要です）．

インストール先のディレクトリは，インストーラを実行する前にいくつかの環境変数（よく
用いられるのは\var{TEXLIVE\_INSTALL\_PREFIX}と\var{TEXLIVE\_INSTALL\_TEXDIR}）を
設定することによっても変更できます．詳細については\code{install-tl \lopt{help}}に
より表示できるドキュメント (\url{http://tug.org/texlive/doc/install-tl.html}) を
参照してください．

合理的なインストール場所の変更先は（特にあなたが\TL を利用する単独のユーザである
場合には）ホームディレクトリ以下でしょう．メタキャラクタ\dir{~}を用いるとこれを
簡単に指定することができます（例：\dir{~/texlive/2019}）．

複数の\TL リリースを同時にインストールできるようにするためにも，インストール先の
ディレクトリ名には「年」を含めることをおすすめします（もし\dir{/usr/local/texlive-%
cur}などバージョンに依存しない名前で管理したいとお考えであれば，シンボリックリンク
を利用して新しいリリースをテストしてからそのリンク先を変更するようにするのも良い
でしょう）．

インストーラにおける\code{TEXDIR}を変更すると\code{TEXMFLOCAL}, \code{TEXMFSYSVAR},
\code{TEXMFSYSCONFIG}にあたるディレクトリも合わせて変更されることになります．

\code{TEXMFHOME}はユーザごとのマクロファイルやパッケージを配置するのに適した場所で，
デフォルトでは\dir{~/texmf}です（\macOS では\dir{~/Library/texmf}）．\code{TEXDIR}%
の場合とは異なり，\TeX を実行しているユーザのホームディレクトリを簡単に参照できる
ように，このデフォルト値では\dir{~}が各々のインストールのために生成された設定
ファイルに書き込まれています．\dir{~}はUNIXでは\dir{$HOME}に，Windowsでは\code{\%%
USERPROFILE\%}にそれぞれ展開されます．繰り返しの注意になりますが，\code{TEXMFHOME}%
も他のTEXMFツリーと同様にTDSにしたがった構成になっているべきです（必要のないファイル
やディレクトリは配置されていなくも構いません）．

\code{TEXMFVAR}はほとんどの（ユーザごとの）実行時キャッシュが保存される場所です．
\code{TEXMFCACHE}は\LuaLaTeX と{\ConTeXt} MkIVが使用するための変数で，デフォルト
では\code{TEXMFSYSVAR}または（もし\code{TEXMFSYSVAR}が書き込み可能でない場合は）
\code{TEXMFVAR}に設定されています．詳細は\ref{sec:context-mkiv}節 (\p.\pageref{%
sec:context-mkiv}) を参照してください．

\subsubsection{オプション}
\label{sec:options}

\begin{figure}[tbh]
\begin{boxedverbatim}
Options customization:
===============================================================================
 <P> use letter size instead of A4 by default: [ ]
 <E> execution of restricted list of programs: [X]
 <F> create all format files:                  [X]
 <D> install font/macro doc tree:              [X]
 <S> install font/macro source tree:           [X]
 <L> create symlinks in standard directories:  [ ]
            binaries to:
            manpages to:
                info to:
 <Y> after install, set CTAN as source for package updates: [X]
\end{boxedverbatim}
\vskip-\baselineskip
\caption{Options menu (Unix)}\label{fig:options-text}
\end{figure}

図\ref{fig:options-text}はテキストモードにおけるオプションメニューです．以下に
各オプションの詳細を列挙します：
%
\begin{description}
\item[use letter size instead of A4 by default%
（A4サイズの代わりにレターサイズをデフォルトで使用）]
デフォルトの用紙サイズを選択します．当然ながら，各ドキュメントのサイズはその都度
ドキュメントに合わせて指定することもできます．

\item[execution of restricted list of programs%
（制限リストにあるプログラムの実行を許可）]
\TL{} 2010以降，いくつかの外部プログラムの実行がデフォルトで許可されるようになり
ました．実行が許可されている（数少ない）プログラムのリストは\file{texmf.cnf}に
記載されています．詳細については\TL{} 2010のリリースノート（\ref{sec:2010news}%
節）を参照してください．

\item[create all format files（すべてのフォーマットファイルを作成）]
必要のないフォーマットの生成（ダンプ）には時間がかかりますし，ディスク容量も使用
しますが，それでもこのオプションは有効にしておくことを推奨します．このオプションを
無効にした場合，各ユーザがフォーマットを使用したいときにフォーマットが生成され，
\code{TEXMFVAR}ツリーに保存されることになります．その場合，生成されたフォーマット
は，仮にバイナリやハイフンパターンの更新が入ったとしても，自動的にはアップデート
されないため，いつまでも非互換なフォーマットファイルを使用し続けることになる可能性
があります．

\item[install font/macro \dots\ tree%
（フォント・マクロの 〜 ツリーをインストール）]
多くのパッケージに付属するソースファイルとドキュメントをダウンロード・インストール
するか否かを選択するオプションです．このオプションを無効化することは非推奨です．

\item[create symlinks in standard directories%
（標準ディレクトリにシンボリックリンクを作成）]
このオプションはUNIXのみで利用可能で，環境変数の変更を回避する手段です．この
オプションを有効にしない場合，\TL のディレクトリは通常手動で\code{PATH}, \code{%
MANPATH}, \code{INFOPATH}に追加する必要があります．ただし，シンボリックリンクの
作成先ディレクトリについて書き込み権限が必要です．このオプションは一般的に知られた
\dir{/usr/local/bin}などのディレクトリ（ただし\TeX 関連コマンドがまだインストール
されていない場所）に\TeX 関連コマンドを配置するためのものです．シンボリックリンクの
作成先にシステムディレクトリを指定するなどして，元々システムに存在していたファイルを
上書きしてしまわないようにご注意ください．安全のため，このオプションは有効にしない
ことをおすすめします．

\item[after install, set {\CTAN} as source for package updates%
（\CTAN をインストール後のパッケージ更新元に設定）]
\TL を\DVD からインストールする場合，このオプションはデフォルトで有効です．大抵の
場合，\TL のユーザは年内に行われるパッケージのアップデートを受け取りたいと考える
ためです．このオプションを無効化する場合があるとしたら，例えば\DVD からは一部の
インストールのみを行って，後に（別の方法で）補強したいような場合でしょう．いずれに
せよ，インストール時およびインストール後に利用するパッケージリポジトリは，必要に
応じて独立に設定することが可能です．詳細は\ref{sec:location}節と\ref{sec:dvd-install%
-net-updates}節を参照してください．
\end{description}

Windowsのみで利用可能なオプションも，上級者向けのPerl/Tkインターフェースで利用可能
です：
%
\begin{description}
\item[adjust PATH setting in registry（レジストリのPATH設定を最適化）]
このオプションによってすべてのプログラムが確実に検索パス中で\TL のバイナリを見つけ
られるようにします．

\item[add menu shortcuts（メニューにショートカットを追加）]
このオプションが有効の場合，スタートメニューに\TL サブメニューが追加されます．ここ
には`TeX Live menu'と`No shortcuts'の他に`Launcher entry'という第三の選択肢も
あります．このオプションについては\ref{sec:sharedinstall}節で説明します．

\item[change file associations（拡張子の関連付けを変更）]
このオプションでの選択肢は`Only new'（拡張子の関連付けを行うが，既に存在する関連
付けの上書きは行わない），`All'，`None'の3つです．

\item[install \TeX works front end（統合開発環境\TeX worksをインストール）]
\end{description}

すべての設定が済みましたら，テキストモードでは`I'をタイプ，Perl/Tkの\GUI モードでは
`Install TeX Live'ボタンを押すことによってインストールを実行してください．インストール
が完了したら（他にすることがなければ）\ref{sec:postinstall}節までスキップしてください．

\subsection{\cmd{install-tl}のコマンドラインオプション}
\label{sec:cmdline}

次を実行すると，\cmd{install-tl}のコマンドラインオプションの一覧を確認することが
できます：
%
\begin{alltt}
> \Ucom{install-tl -help}
\end{alltt}
%
オプション名を指定するには\sopt{}または\lopt{}を利用できます．以下では，一般的な
オプションについてのみ説明します：
%
\begin{description}
\item[\sopt{gui}]
インストーラを（もし利用可能なら）\GUI モードで起動します．\GUI モードの実行には
バージョン8.5以上のTcl/Tkが必要です．これは\macOS ではご自身でインストールしていただく
必要がありますが，Windows用の\TL には同梱されているため特に何もする必要はありません．
古いオプションである\sopt{gui=perltk}と\sopt{gui=wizard}も現在でも利用可能です．
これらの実行のためにはXFTサポートが有効なPerl/Tkモジュールが必要です (\url{http://%
tug.org/texlive/distro.html#perltk})．Tcl/TkとPerl/Tkが利用可能でない場合，この
オプションが指定された場合でもインストーラはテキストモードで続行されます．

\item[\sopt{no-gui}]
インストーラを必ずテキストモードで起動します．

\item[\sopt{lang \meta{言語コード}}]
指定した\meta{言語コード}（通常2文字）にあたる言語を使用します（訳注：日本語を使用
したい場合は\sopt{lang ja}とします）．インストーラは自動的に最適な言語で起動します
が，もし自動判定に失敗した場合や最適な言語が利用不可能な場合は，英語を使用します．
インストーラで利用可能な言語の一覧は\code{install-tl -help}で確認できます．

\item[\sopt{portable}]
\TL を\USB メモリなどにポータブルインストールします．ポータブルインストールは，
インストーラの起動後にテキストモードの\code{V}コマンドまたは\GUI モードのメニュー
を利用して選択することもできます．詳細は\ref{sec:portable-tl}節を参照してください．

\item[\sopt{profile \meta{ファイル}}]
インストールプロフィール\meta{ファイル}を読み込み，非対話的にインストールを実行
します．なおインストーラは常に\file{texlive.profile}を\dir{tlpkg}ディレクトリに
書き込みます．このファイルを利用すると，まったく同じ設定でインストールを（例えば
別のシステムでも）再実行することが可能です．別の活用方法として，ご自身で用意した
カスタムプロフィール（生成された\file{texlive.profile}を改変するのが簡単です）を
使用したり，空のファイルを指定してすべてをデフォルト設定でインストールしたりする
こともできます．

\item[\sopt{repository \meta{リポジトリ}}]
パッケージリポジトリ（ディレクトリまたはURL）を指定します．下の\ref{sec:location}%
節を参照してください．

\item[\sopt{in-place}]
（警告：このオプションは何をしようとしているのか完全に承知している場合以外は使用
しないでください．）すでにrsyncやsvnまたはその他の手段で\TL のコピー（その入手元
については\url{http://tug.org/texlive/acquire-mirror.html}を参照）がお手許にある
場合，このオプションを利用するとそのコピーをそのまま利用し，追加で必要となるものが
ものだけをインストールします．なお\file{tlpkg/texlive.tlpdb}は上書きされるので，
ご自身の責任で保存するようにしてください．また，既にあるパッケージの除去は手動で
行う必要があります．このオプションは起動後にインストーラのインターフェースで有効に
することはできません．
\end{description}

\subsubsection{\sopt{repository}オプション}
\label{sec:location}

デフォルトのネットワーク上パッケージリポジトリは\url{http://mirror.ctan.org}に
よって自動的に選択される\CTAN ミラーです．

このデフォルトを上書きしたい場合は，使用したいリポジトリを\code{ftp:}, \code{%
http:}, \code{file:/}のいずれかからはじまるURL，または通常のディレクトリパスに
よって指定します（\code{http:}または\code{ftp:}から始まるリポジトリ指定を
行った場合，末尾の`\code{/}'や`\code{/tlpkg}'は無視されます）．

例えば\CTAN の特定のミラーサーバを\url{http://ctan.example.org/tex-archive/%
systems/texlive/tlnet/}のように指定した場合，実際のホスト名と，そのホストに
おける\CTAN のトップレベルパスを\code{ctan.example.org/tex-archive}の代わりに
使用します．\CTAN ミラーの一覧は\url{http://ctan.org/mirrors}で確認できます．

もし与えられた引数が（パスまたは\code{file:/} URLの形で）ローカルのディレクトリ
を指していた場合，その下にある\dir{archive}サブディレクトリ内の圧縮ファイルが
（仮に展開済みのものがあったとしても）使用されます．

\subsection{インストール後のアクション}
\label{sec:postinstall}

場合によっては，インストール後に多少の手順を行う必要があるかもしれません．

\subsubsection{UNIXにおける環境変数の設定}
\label{sec:env}

インストール時に標準ディレクトリにシンボリックリンクを作成している（\ref{sec:%
options}節を参照）場合は，環境変数を変更する必要はありません．それ以外の場合，
UNIXシステムではご使用のプラットフォーム向けのバイナリのあるディレクトリを
検索パスに追加する必要があります（Windowsではインストーラが行うので気にする
必要はありません）．

\TL にサポートされている各プラットフォームには\dir{TEXDIR/bin}以下に専用の
サブディレクトリがあります．専用サブディレクトリのリストと，それぞれに対応する
プラットフォームについては図\ref{fig:bin-text}を参照してください．

さらに，必要であればmanページとinfoマニュアルを含むディレクトリを，それぞれの
検索パスに追加することができます．ただしmanページについては\code{PATH}を設定
することによって自動的に検索可能になる場合もあります．

例えば，Intel x86アーキテクチャ上の\GNU/Linuxで\prog{bash}などBourneシェルと
互換性のあるシェルを使用していて，なおかつデフォルトのディレクトリ設定の環境の
下では\file{$HOME/.profile}（もしくは\file{.profile}から読み込まれている別の
ファイルでも構いません）に次のような行を追加することで環境変数を設定できます：
%
\begin{sverbatim}
PATH=/usr/local/texlive/2019/bin/x86_64-linux:$PATH; export PATH
MANPATH=/usr/local/texlive/2019/texmf-dist/doc/man:$MANPATH; export MANPATH
INFOPATH=/usr/local/texlive/2019/texmf-dist/doc/info:$INFOPATH; export INFOPATH
\end{sverbatim}
%
cshやtcshの場合は，編集すべきファイルは典型的には\file{$HOME/.cshrc}で，次の
ような行を追加します：
%
\begin{sverbatim}
setenv PATH /usr/local/texlive/2019/bin/x86_64-linux:$PATH
setenv MANPATH /usr/local/texlive/2019/texmf-dist/doc/man:$MANPATH
setenv INFOPATH /usr/local/texlive/2019/texmf-dist/doc/info:$INFOPATH
\end{sverbatim}
%
もちろん，既にいわゆる「ドットファイル」（各種の設定ファイル）に何かしらの設定
を記入している場合は，\TL 用のディレクトリは他の設定と競合しないよう適切に
なされるべきです．

\subsubsection{環境変数をグローバルに設定する}
\label{sec:envglobal}

もし前節で説明したような環境変数の変更をシステム全体に適用したい場合や，新しい
ユーザにも適用したい場合は，ご自身の力で設定を行ってください．なぜなら，その
ようなことを実現する方法は，システムによってあまりに異なるからです．

ここでは2つほど大まかな方針を示しておきます．第一に\file{/etc/manpath.config}%
というファイルの存在を確かめて，もし存在していたら次のような内容を追記します：
%
\begin{sverbatim}
MANPATH_MAP /usr/local/texlive/2019/bin/x86_64-linux \
            /usr/local/texlive/2019/texmf-dist/doc/man
\end{sverbatim}
%
第二に各種の検索パスや環境変数のデフォルト値を設定するためのファイル\file{%
/etc/environment}の内容を確認することです．

各UNIX向けのバイナリディレクトリには，\file{man}という名前の\dir{texmf-dist%
/doc/man}を指すシンボリックリンクが作成されています．一部の\prog{man}プログラム
（例えば\macOS の標準\cmd{man}コマンド）は，これを利用して自動的にmanページの
設定を最適化してくれる場合があります．

\subsubsection{\DVD インストール後のインターネットを利用したアップデート}
\label{sec:dvd-install-net-updates}

\TL を\DVD からインストールした後，インターネットを利用してアップデートを行いたい
場合は，以下のコマンドを検索パスの設定の\emph{後}に行ってください：
%
\begin{alltt}
> \Ucom{tlmgr option repository http://mirror.ctan.org/systems/texlive/tlnet}
\end{alltt}
%
これによって以降\cmd{tlmgr}は最寄りの\CTAN ミラーを利用してアップデートを行う
ようになります．\DVD からのインストール時に\ref{sec:options}節で説明したオプション
を介してこの設定をデフォルトにしておくこともできます．

もしミラーの自動選択では問題がある場合は，\url{http://ctan.org/mirrors}から特定の
\CTAN ミラーを指定することもできます．その際は\dir{tlnet}サブディレクトリまでの
パスを正確に指定するようにしてください．

\subsubsection{\XeTeX と\LuaTeX のためのシステム設定}
\label{sec:font-conf-sys}

\XeTeX と\LuaTeX では，\TeX ツリーに存在するものだけでなく，システムにインストール
されているあらゆるフォントを利用することができます．これらのエンジンは互いに関連
する方法でこれを実現していますが，そのしくみはまったく同じではありません．

Windowsでは，\TL に含まれているフォントは自動的にフォント名を指定するだけで\XeTeX
から利用できるように設定されます．\macOS では，フォント名による検索を有効にする
ためにはいくつかの手順が必要です（詳細はMac\TeX のウェブサイト\url{http://tug.org/%
mactex}を参照してください）．他のUNIXシステムでの設定方法は，以下の通りです．

この設定を簡単にするために，\pkg{xetex}パッケージのインストール時（最初の\TL
インストール時または追加インストール時）に必要な設定が\file{TEXMFSYSVAR/fonts/%
conf/texlive-fontconfig.conf}に作成されます．\TL フォントをシステム全体で利用できる
ようにするためには，次の手順を実行します（そのために必要な権限は持っているものと
します）：
%
\begin{enumerate*}
\item \file{texlive-fontconfig.conf}を\dir{/etc/fonts/conf.d/09-texlive.conf}に
  コピーする．
\item \Ucom{fc-cache -fsv}を実行する．
\end{enumerate*}

\cmd{fc-list}を実行するとシステムにあるフォントの一覧を確認することができます．
また\code{fc-list : family style file spacing}（打ち間違えにご注意ください）と
すると，もう少し詳細な情報を表示することができます．

\subsubsection{{\ConTeXt} Mark IV}
\label{sec:context-mkiv}

「古い」{\ConTeXt} (Mark II)と「新しい」{\ConTeXt} (Mark IV)はいずれも\TL の
インストール後はそのままで動く状態になっているはずで，\cmd{tlmgr}を使用して
アップデートを行っている限りは特に特別な設定を行う必要はありません．

しかしながら，{\ConTeXt} MkIVはkpathseaライブラリを使用していないので，\cmd{%
tlmgr}を使用せず手動で新しいファイルをインストールした場合にはいくつかの設定
を行う必要があります．そのような手動インストールを行った場合には，MkIVユーザ
は次を実行して\ConTeXt のディスクキャッシュデータをクリアする必要があります：
%
\begin{alltt}
> \Ucom{context --generate}
\end{alltt}
%
なお，この操作によって生成されるファイルは\code{TEXMFCACHE}（デフォルト値は
\code{TEXMFSYSVAR;TEXMFVAR}）以下に保存されます．

{\ConTeXt} MkIVは\code{TEXMFCACHE}に列挙されているパスを前から確認し，そして
書込み可能な最初の場所にキャッシュを作成します．読み込みの際は，複数の
キャッシュが見つかった場合は（見つかったキャッシュの中で）一番最後のパスに
あるものが優先されます．

より詳細な情報については\url{http://wiki.contextgarden.net/Running_Mark_IV}を
参照してください．

\subsubsection{ローカルおよび個人用のマクロを利用する}
\label{sec:local-personal-macros}

ローカルおよび個人用のマクロの配置方法については\ref{sec:texmftrees}節でも簡単に
言及しましたが，\code{TEXMFLOCAL}（デフォルトでは\dir{/usr/local/texlive/texmf-%
local}または\winpath{\winenv{SystemDrive}\\texlive\\texmf-local}）はシステム全体
に適用したいローカルなフォントやマクロを，\code{TEXMFHOME}（デフォルトでは\dir{%
$HOME/texmf}または\winpath{\winenv{USERPROFILE}\\texmf}）はユーザごとの個人用
フォントやマクロを配置するためのものです．これらのディレクトリは毎年のリリース
とは切り離して管理されることが意図されており，そこに含まれているファイルは自動的
に各\TL リリースから検索できるようになっています．したがって，\code{TEXMFLOCAL}%
の値をメインの\TL ツリーとあまりかけ離れた位置に変更することは避けるべきです．
さもないと将来のリリースの際に手動で変更を行う必要が発生する可能性があります．

いずれのツリーについても，それぞれのファイルは\TDS に基づいたサブディレクトリに
配置されているべきです（\url{http://tug.org/tds}や\file{texmf-dist/web2c/texmf.%
cnf}を参照してください）．例えば\LaTeX のクラスファイルやパッケージは\dir{%
TEXMFLOCAL/tex/latex}や\dir{TEXMFHOME/tex/latex}，あるいはそれより下の階層に配置
されているべきです．

\dir{TEXMFLOCAL}については最新の状況を反映したファイル名データベースがないと，
その中にあるファイルが見つけられません．データベースは\cmd{mktexlsr}コマンドを
実行するか，GUI版\TL マネージャで`Reinit file database'ボタンを押すことによって
更新することができます．

デフォルトでは，これまで見てきたように各TEXMFツリーを表す変数は1つのディレクトリ
を指すように定義されています．しかし，これは絶対そうでなければならないわけでは
ありません．例えば，もし複数のバージョンの大きなパッケージを簡単に切り替える必要
があるような場合は，複数のツリーを用意した上で\code{TEXMFHOME}をブレースで囲わ
れたカンマ区切りのディレクトリ名リストに設定するとよいでしょう：
%
\begin{verbatim}
  TEXMFHOME = {/my/dir1,/mydir2,/a/third/dir}
\end{verbatim}
%
ブレース展開については\ref{sec:brace-expansion}節により詳しい解説があります．

\subsubsection{サードパーティフォントを利用する}

これは残念ながら泥沼への入り口です．\TeX インストールの深淵に飛び込みたい場合を
除いては，すべての\TeX 処理系でサードパーティフォントを利用できるようにすること
は諦めた方が無難です．\TL には数多くのフォントが含まれているので，それらの中に
適当なものがないか探してみてください（既に適するものがないとわかっている場合は
仕方ありませんが）．

ただし\XeTeX または\LuaTeX （\ref{sec:tex-extensions}節）であれば\TeX のために
特別な設定を行わなくてもOSにインストールされたあらゆるフォントを利用することが
できます．

もしどうしてもサードパーティフォントを一般の\TeX 処理系で利用できるように設定を
行う必要がある場合は，\url{http://tug.org/fonts/fontinstall.html}にその方法に
ついて（可能な範囲での）解説がありますので，参考にしてください．

\subsection{インストールした\TL をテストする}
\label{sec:test-install}

\TL をインストールした後，美しい文書やフォントの作成を始めるために\TL が正常に
動作するかテストしたいと思うのが普通でしょう．

おそらく，多くの人がまず最初に動作確認したいのはファイル編集を行うフロントエンド
でしょう．\TL はWidows（のみ）では{\TeX}works (\url{http://tug.org/texworks}) を，
Mac\TeX は{\TeX}Shop (\url{http://pages.uoregon.edu/koch/texshop}) をインストール
します．他のUNIXシステムではどのエディタを利用するかはユーザが決めてください．
エディタの選択肢はとてもたくさんあり，その一部は次のセクションでリストアップされて
います．また\url{http://tug.org/interest.html#editors}も参考になるかと思います．
基本的にはどんなテキストエディタでも使用できます．\TeX のための特別な機能は，
なくてならないものではありません．

残りのセクションでは，新しい\TL が正常に動作するか確認する基本的な手順を解説します．
なお，ここではUNIXコマンドを使用した方法を紹介します．macOSやWindowsのユーザは，
GUIを利用してテストをしたいと考えるかもしれませんが，根本的な部分は変わりません．

\begin{enumerate}
\item まずはじめに，\cmd{tex}プログラムが実行可能であることを確認しましょう：
%
\begin{alltt}
> \Ucom{tex \lopt{version}}
TeX 3.14159265 (TeX Live ...)
Copyright ... D.E. Knuth.
...
\end{alltt}
%
もしこれを実行したとき，正しいバージョン情報・コピーライト情報の代わりに`command
not found'エラーが出たり，古いバージョン情報が表示される場合は，正しい\dir{bin}%
ディレクトリが\code{PATH}に追加されていない可能性が高いです．そのような場合は\p.%
\pageref{sec:env}にある環境変数設定の情報を確認してください．

\item 基本的な\LaTeX ファイルを処理してみましょう：
%
\begin{alltt}
> \Ucom{latex sample2e.tex}
This is pdfTeX 3.14...
...
Output written on sample2e.dvi (3 pages, 7484 bytes).
Transcript written on sample2e.log.
\end{alltt}
%
\file{sample2e.tex}やその他のファイルが見つからないというエラーが出る場合は，
古い環境変数の設定や設定ファイルの影響を受けてしまっている可能性が高いです．
まずは\TeX 関係の環境変数をすべてクリアすることをおすすめします．（より詳細に
分析したい場合は，\TeX 自身に何を検索し，何を見つけたのか報告させるのが良い
でしょう．詳細は\p.\pageref{sec:debugging}の「デバッグアクション」を参照して
ください．）

\item 次に処理結果をプレビューしてみましょう：
%
\begin{alltt}
> \Ucom{xdvi sample2e.dvi}    # Unix
> \Ucom{dviout sample2e.dvi}  # Windows
\end{alltt}
%
すると，新しいウィンドウがポップして\LaTeX の基礎について説明した素敵な文書が
表示されるはずです（ところで，もし\TeX を使うのが初めてでしたら，その内容も
一読の価値があります）．なお\cmd{xdvi}コマンドを利用するにはXウィンドウシステム
が正しく動作している必要があります．正常に動作していない場合や，環境変数\code{%
DISPLAY}の設定がまずい場合は\samp{Can't open display}エラーが発生します．

\item 続いて\PS ファイルを作成してみましょう：
%
\begin{alltt}
> \Ucom{dvips sample2e.dvi -o sample2e.ps}
\end{alltt}

\item 今度は\DVI ファイルの代わりにPDFファイルを作成します．今回は\code{.tex}%
ファイルから直接PDFを生成してみます：
%
\begin{alltt}
> \Ucom{pdflatex sample2e.tex}
\end{alltt}

\item 生成したPDFもプレビューしてみましょう：
%
\begin{alltt}
> \Ucom{gv sample2e.pdf}
\textrm{or:}
> \Ucom{xpdf sample2e.pdf}
\end{alltt}
%
\cmd{gv}も\cmd{xpdf}も\TL には含まれていないので，ご自身でインストールする必要
があります．詳細はそれぞれ\url{http://www.gnu.org/software/gv}と\url{http://www.%
foolabs.com/xpdf}を参照してください．PDFビューアは他にもたくさんあります．例えば
WindowsではSumatra PDF (\url{https://www.sumatrapdfreader.org/free-pdf-reader.%
html}) をおすすめします．

\item \file{sample2e.tex}以外でテストのために利用できる標準的なファイルを以下に
示しておきます：
%
\begin{description}
\item [\file{small2e.tex}]
\file{sample2e.tex}よりもシンプルな文書です．なにか問題が発生したときに，より
入力サイズの小さいものとして利用できます．

\item [\file{testpage.tex}]
プリンタにオフセットがあるかどうかを確認するための文書です．

\item [\file{nfssfont.tex}]
フォントテーブルを出力・テストするためのものです．

\item [\file{testfont.tex}]
plain \TeX を用いて，同じくフォントテーブルを出力するものです．

\item [\file{story.tex}]
最も標準的な (plain) \TeX のテスト用ファイルです．\Ucom{tex story.tex}を実行
後，\code{*}プロンプトに\samp{\cs{bye}}を入力する必要があります．
\end{description}

\item \pkg{xetex}パッケージをインストールしている場合には，\XeTeX がシステム
フォントを正常に利用できるかどうかテストすることができます：
%
\begin{alltt}
> \Ucom{xetex opentype-info.tex}
This is XeTeX, Version 3.14\dots
...
Output written on opentype-info.pdf (1 page).
Transcript written on opentype-info.log.
\end{alltt}
%
もし``Invalid fontname `Latin Modern Roman/ICU'\dots''というエラーメッセージ
が表示された場合は，\TL に含まれるフォントを見つけられるように設定を行う必要
があります．\ref{sec:font-conf-sys}節を参照してください．
\end{enumerate}

\subsection{その他のダウンロード可能なソフトウェア}

\TeX 初心者や\LaTeX 文書を実際に作成するにあたってヘルプが必要な方は，ぜひ
\url{http://tug.org/begin.html}にアクセスしてみてください．いくつかの初心者
向けの情報を掲載しています．

ここではインストールの検討に値する各種ツールへのリンクを列挙しておきます：
%
\begin{description}
\item[Ghostscript] \url{https://ghostscript.com/}
\item[Perl] \url{http://www.perl.org/}%
  （追加パッケージはCPAN (\url{http://www.cpan.org/}) から入手可）
\item[ImageMagick] \url{http://www.imagemagick.com}（画像の加工や変換）
\item[NetPBM] \url{http://netpbm.sourceforge.net/}（こちらも画像用ツール）
\item[\TeX 向きのエディタ] テキストエディタの選択肢はかなり多岐にわたり，その
  選択は完全に各自の好みによります．ここでは主なものをアルファベット順に紹介
  しておきます（一部はWindows専用です）．
  \begin{itemize*}
  \item \prog{GNU Emacs}: \url{http://www.gnu.org/software/emacs/emacs.html}%
    （Windowsでも利用可）
  \item \prog{Emacs Auc\TeX}: \url{http://www.gnu.org/software/auctex}%
    （Windows版は\CTAN から入手可）
  \item \prog{SciTE}: \url{http://www.scintilla.org/SciTE.html}
  \item \prog{Texmaker}: \url{http://www.xm1math.net/texmaker}
  \item \prog{\TeX studio}: \url{http://texstudio.org/}%
    （\prog{Texmaker}のフォークプロジェクト）
  \item \prog{\TeX nicCenter}: \url{http://www.texniccenter.org}%
    （pro\TeX{}tでは標準添付）
  \item \prog{\TeX works}: \url{http://tug.org/texworks}%
    （Windows版\TL では標準添付）
  \item \prog{Vim}: \url{http://www.vim.org}
  \item \prog{WinEdt}: \url{http://tug.org/winedt}, \url{http://www.winedt.com}%
    （シェアウェア）
  \item \prog{WinShell}: \url{http://www.winshell.de}
  \end{itemize*}
\end{description}

\section{特殊なインストール}

ここまでは基本的なインストール手順について説明してきました．このセクションでは，
いくつかの特殊なインストールについて解説します．

\subsection{共有インストール}
\label{sec:sharedinstall}

\TL はネットワーク上の複数のシステムで共有できるように設計されています．標準の
ディレクトリ構成では，いかなるパスもハードコードされていません．\TL に含まれる
プログラムは必要なファイルを相対パスによって探索します．このことは，\TL の根幹に
あたる設定ファイル\file{$TEXMFDIST/web2c/texmf.cnf}を見ればわかります．そこには
%
\begin{sverbatim}
TEXMFROOT = $SELFAUTOPARENT
...
TEXMFDIST = $TEXMFROOT/texmf-dist
...
TEXMFLOCAL = $SELFAUTOGRANDPARENT/texmf-local
\end{sverbatim}
%
のような記述が並んでいるはずです．この仕組みのおかげで，各プラットフォーム向け
の実行ファイルを，それぞれの検索パスに追加するだけで\TL が機能するように設定
できます．

同様に，一度ローカルに\TL をインストールし，そのすべての階層をネットワーク上の
場所に移動することも可能です．

Windows向けには，\TL は\cmd{tlaunch}というランチャーを含んでいます．そのメイン
画面のメニューには種々の\TeX 関連プログラムおよびドキュメントについてアクション
を起こすためのボタンがあります．この画面は\code{ini}ファイルによってカスタマイズ
することも可能です．初回起動時には，それらのボタンは通常のWindows向けポスト
インストールを実行（すなわち検索パスと拡張子の関連付けを更新）しますが，この操作
は現在ログイン中のユーザにしか適用されません．したがって，ローカルネットワークに
アクセスできる各システムで\TL を利用できるようにするためには，\cmd{tlaunch}に
メニューショートカットを追加するだけで事足ります．詳細については\cmd{tlaunch}の
マニュアルを参照してください（\Ucom{texdoc tlaunch}を実行するか\url{https://%
ctan.org/pkg/tlaunch}にアクセスすると閲覧できます）．

\subsection{ポータブル (\USB) インストール}
\label{sec:portable-tl}

\TL インストーラに\sopt{portable}オプションを与えると（テキストモードで\code{V}%
コマンドを実行したり\GUI モードで同等のオプションを利用した場合も同様です）\TL
は完全に自己完備のインストールを標準的なルート以下に作成します．これはシステムの
いかなる環境にも依存しません．このような構成の\TL はUSBメモリに直接インストール
したり，後からUSBにコピーしたりすることができます．

ポータブルインストールされた\TeX を実行するには，通常通り実行ファイルのある適切な
ディレクトリを（端末セッションの間）検索パスに追加する必要があります．

Windowsでは，ポータブルインストールのルートにある\cmd{tl-tray-menu}をダブルクリック
することによって一時的な`tray menu'が作成され，これを用いていくつかの一般的なタスク
を実行することができます：
%
\medskip
\tlpng{tray-menu}{4cm}
\smallskip
%
この画面で`More\ldots'を押すと，このメニューのカスタマイズ方法についての説明が表示
されます．

\section{\prog{tlmgr}: \TL マネージャ}
\label{sec:tlmgr}

\begin{figure}[tb]
\tlpng{tlshell-macos}{\linewidth}
\caption{\prog{tlshell} \GUI のアクションメニュー (\macOS)}
\label{fig:tlshell}
\end{figure}

\begin{figure}[tb]
\tlpng{tlcockpit-packages}{.8\linewidth}
\caption{\prog{tlmgr}の新しい{\GUI} (\prog{tlcockpit})}
\label{fig:tlcockpit}
\end{figure}

\begin{figure}[tb]
\tlpng{tlmgr-gui}{\linewidth}
\caption{\prog{tlmgr}のレガシー\GUI モード．`Load'後のメインウィンドウ}
\label{fig:tlmgr-gui}
\end{figure}

\TL にはインストール後の\TL 管理のために\prog{tlmgr}というプログラムが同梱されて
います．その主な機能は：
%
\begin{itemize*}
\item 個別パッケージのインストール，アップデート，バックアップ，アンインストール
  （依存関係管理も可）
\item パッケージの検索と詳細の表示
\item プラットフォームの表示，追加，削除
\item インストールオプションの変更（デフォルトの用紙サイズやソースの場所）
\end{itemize*}

\prog{texconfig}の機能はすべて\prog{tlmgr}にも備わっています．\TL チームは\prog{%
texconfig}の操作に慣れている方々のために依然としてその配布およびメンテナンスを継続
していますが，\prog{tlmgr}を使用することをおすすめします．

\subsection{\prog{tlmgr}の\GUI}

\TL には\prog{tlmgr}の\GUI が複数含まれています．\prog{tlshell}（図\ref{fig:%
tlshell}）はTcl/Tkを利用した\GUI でWindowsと\macOS で利用可能です．\prog{%
tlcockpit}はバージョン8以降のJavaとJavaFXで動作する\GUI です．これらはいずれも独立
したパッケージです．

\prog{tlmgr}それ自体にも\GUI モードが存在します（図\ref{fig:tlmgr-gui}）：
%
\begin{alltt}
> \Ucom{tlmgr -gui}
\end{alltt}
%
この\GUI 拡張の実行にはPerl/Tkが必要です．現在はWindows向けの\TL にはPerl/Tk%
モジュールは同梱されていないので注意してください．

\subsection{コマンド使用例}

最初のインストールののち，\TL を最新の状態にアップデートするには：
%
\begin{alltt}
> \Ucom{tlmgr update -all}
\end{alltt}
%
もし実際のアップデートを実行する前に何が起きるかを確認したい場合は：
%
\begin{alltt}
> \Ucom{tlmgr update -all -dry-run}
\end{alltt}
%
または（出力メッセージを減らすなら）
%
\begin{alltt}
> \Ucom{tlmgr update -list}
\end{alltt}

もう少し複雑な例として，\XeTeX 用のコレクションをローカルディレクトリから追加
する方法を示します：
%
\begin{alltt}
> \Ucom{tlmgr -repository /local/mirror/tlnet install collection-xetex}
\end{alltt}
%
これを実行すると，次のような出力が表示されます（一部省略しています）：
%
\begin{fverbatim}
install: collection-xetex
install: arabxetex
...
install: xetex
install: xetexconfig
install: xetex.i386-linux
running post install action for xetex
install: xetex-def
...
running mktexlsr
mktexlsr: Updating /usr/local/texlive/2019/texmf-dist/ls-R...
...
running fmtutil-sys --missing
...
Transcript written on xelatex.log.
fmtutil: /usr/local/texlive/2019/texmf-var/web2c/xetex/xelatex.fmt installed.
\end{fverbatim}

上の出力からわかるように，\prog{tlmgr}は依存パッケージもインストールし，ファイル名
データベースの更新やフォーマットの（再）生成など必要なインストール後処理も自動的に
実行しています．ここでは\XeTeX 用の新しいフォーマットが生成されています．

パッケージ（またはコレクション，スキーム）の詳細を確認するには次のようにします：
%
\begin{alltt}
> \Ucom{tlmgr show collection-latexextra}
\end{alltt}
%
これにより以下のような出力が得られるはずです：
%
\begin{fverbatim}
package:    collection-latexextra
category:   Collection
shortdesc:  LaTeX supplementary packages
longdesc:   A very large collection of add-on packages for LaTeX.
installed:  Yes
revision:   46963
sizes:      657941k
\end{fverbatim}
%
最後に，最も大事なことですが，フルドキュメントを確認するには\url{http://tug.org/%
texlive/tlmgr.html}にアクセスするか，以下を実行してください：
%
\begin{alltt}
> \Ucom{tlmgr -help}
\end{alltt}

\section{Windows向けの情報}
\label{sec:windows}

\subsection{Windows専用の機能}
\label{sec:winfeatures}

Windowsでは\TL はいくつか追加の処理を行います：
%
\begin{description}
\item[メニューとショートカット]
スタートメニューに`\TL'サブメニューを追加します．このサブメニューから\prog{tlmgr},
\prog{texdoctk}や\PS ビューア (\prog{psv}) などの\GUI プログラムを起動したり，
いくつかのドキュメントにアクセスしたりすることができます．

\item[拡張子の関連付け]
設定が有効になっている場合，\prog{\TeX works}, \prog{Dviout}, \prog{PS\_View}などを
それぞれが扱う拡張子に関連付けます．また関連するファイルを右クリックして「プログラム
から開く」を選択した場合に\TL のプログラムが候補に上がるようになります．

\item[ビットマップからEPSへの変換]
各種のビットマップ画像を右クリックして「プログラムから開く」を選択した場合に\prog{%
bitmap2eps}を選択できるようになります．\prog{bitmap2eps}はシンプルなスクリプトで，
バックエンドとして\prog{sam2p}や\prog{bmeps}を利用します．

\item[自動パス設定]
Windowsでは手動でパス設定を行う必要はありません．

\item[アンインストーラ]
「プログラムの追加と削除」メニューの中に\TL をアンインストールするための項目を追加
します．これを使用するとGUI版\TL マネージャのアンインストールタブが開きます．単一
ユーザ向けに\TL をインストールした場合は，スタートメニューにもアンインストール用の
項目が追加されます．

\item[書き込み禁止]
管理者として\TL をインストールした場合，\TL のディレクトリは書き込み禁止に設定され
ます（通常のNTFSフォーマット内蔵ディスクにインストールした場合）．
\end{description}

また\prog{tlaunch}（\ref{sec:sharedinstall}節）も参照してみてください．

\subsection{Windows向けに追加されているソフトウェア}

\TL を完全にインストールするためには，Windowsマシンには通常存在していないパッケージ
が必要となります．そのため\TL はWindows向けに一部の依存パッケージを同梱しています．
以下に列挙するプログラムはWindows版の\TL にのみ含まれています：
%
\begin{description}
\item[PerlとGhostscript]
PerlとGhostscriptは重要なので，\TL には「隠された」それらのコピーが含まれています．
これらのプログラムは\TL のプログラムからは利用可能ですが，環境変数やレジストリ設定
の上では存在していないことになっています．\TL に同梱されているPerlとGhostscriptは
完全版ではなく，またシステムに別途インストールされたものとは一切干渉しません．

\item[PS\_View]
\PS /PDFビューア（図\ref{fig:psview}）．

\item[dviout]
\DVI ビューア．初期状態では，ファイルを\prog{dviout}でプレビューしようとすると，
フォント生成が行われるはずです．これはスクリーンフォントがインストールされていない
ためです．しばらく使用していると，頻繁に利用されるフォントの生成が完了するため，
フォント生成ウィンドウが現れることは稀になります．詳細はオンラインヘルプ（おすすめ）
を参照してください．

\item[\TeX works]
PDFビューア機能をもつ\TeX 用の統合開発環境．

\item[各種コマンドラインツール]
\TL バイナリと同時に，多数のWindows移植版のUNIXコマンドもインストールされます．\cmd{%
gzip}, \cmd{zip}, \cmd{unzip}や\prog{poppler}関連の\cmd{pdfinfo}, \cmd{pdffonts}など
です．Windows版\TL にはスタンドアロンなPDFビューアは含まれていません．必要に応じて
Sumatra PDF viewer (\url{https://sumatrapdfreader.org/}) などをインストールしてくだ
さい．

\item[fc-list, fc-cache, \ldots]
これらのフォント管理ライブラリを利用して\XeTeX からWindows上のフォントを利用できます．
\prog{fc-list}を用いると\XeTeX 拡張の\cs{font}コマンドに与えるべきフォント名を決定
することができます．必要に応じて\prog{fc-cache}を事前に実行してフォント情報を更新して
ください．
\end{description}
%
\begin{figure}[tb]
\centering \tlpng{psview}{.6\linewidth}
\caption{PS\_View: かなり高い倍率まで拡大することができます．}\label{fig:psview}
\end{figure}

\subsection{ユーザプロフィールがホームディレクトリ扱い}
\label{sec:winhome}

Windowsにおいて，UNIXのホームディレクトリに相当するのは\winenv{USERPROFILE}ディレクトリ
です．Windows Vista以降のWindowsでは，そのデフォルト値は\winpath{C:\\Users\\<username>}%
です．\file{texmf.cnf}内および\KPS 全般において，\dir{~}はWindowsとUNIXのいずれにおいて
も適切に展開されます．

\subsection{レジストリ}
\label{sec:registry}

Windowsではほとんどすべての設定データはレジストリに保存されます．レジストリには数個の
ルートの下に階層的に構成されたキーが多数含まれています．簡単に言うと，インストール
プログラムにとって最も重要なものは\var{HKEY\_CURRENT\_USER}, \var{HKEY\_LOCAL\_MACHINE},
\var{HKCU}, \var{HKLM}です．レジストリのキー\var{HKCU}はユーザのホームディレクトリ内を
参照します（\ref{sec:winhome}節を参照）．\var{HKLM}は通常Windowsディレクトリ内のサブ
ディレクトリです．

一部の項目については環境変数によってシステム情報を引き渡すことができますが，ショート
カットの位置などはレジストリを変更しないことには設定を反映することができません．また
環境変数の値を恒久的に変更するのにもレジストリを編集する必要があります．

\subsection{パーミッション}
\label{sec:winpermissions}

最近のバージョンのWindowsでは，管理者のみにOS全体へのアクセス権があり，一般ユーザには
ありません．\TL は管理者権限がなくてもインストール可能なように工夫されています．

管理者権限でインストーラが実行されているときは，全ユーザ向けにインストールを行うため
のオプションが利用可能です．このオプションを選択した場合，全ユーザ向けにショートカット
が作成され，またシステムの検索パスも変更されます．逆に，このオプションを選択しなかった
場合はシュートカットとメニュー項目はインストーラを実行したユーザ向けにのみ作成され，
そのユーザの検索パスだけが更新されます．

管理者として実行するか否かに関わらず，インストーラは常にデフォルトの\TL ルートを
\winenv{SystemDrive}以下に設定します．インストーラは，必ず設定しようとしているルート
位置が現在の実行権限で書き込み可能かどうか確認します．

検索パスに\TeX が存在する状態で，一般ユーザとして\TL のインストールを実行しようとする
と問題が発生します．システムの検索パスはユーザの検索パスよりも優先されるので，この
状況で\TL をインストールしても優先的に利用されることはありません．安全策として，
インストーラは新しくインストールされた\TL バイナリのディレクトリがローカル検索パスの
先頭にくるようコマンドプロンプトにショートカットを作成します．そのため，この安全策が
有効なコマンドプロンプトからは常に新しい\TL が利用可能です．\TeX worksがインストール
されている場合，その検索パスについても\TL が先頭にくるよう設定されるため，同様に検索
パスの問題は回避されるはずです．

Windowsでは管理者アカウントにログインしていても，明示的に管理者権限としての実行を指示
する必要があることに注意してください．実際のところ，管理者アカウントにログインする
だけではあまり意味がありません．肝心なのは，プログラムやショートカットを右クリックし
「管理者として実行」を選択することです．

\subsection{WindowsとCygwinでメモリ上限を増やす方法}
\label{sec:cygwin-maxmem}

WindowsとCygwin（Cygwinインストールの詳細については\ref{sec:cygwin}節を参照してくだ
さい）では，\TL に含まれるいくつかのプログラムがメモリを使い果たす場合があります．
例えば\prog{asy}で25,000,000リールの配列を確保しようとしたり，\LuaTeX で多書体組を
行おうとしたりするとメモリが不足する可能性があります．

Cygwinではユーザマニュアル (\url{http://www.cygwin.com/cygwin-ug-net/setup-maxmem.%
html}) の説明に従うことによってメモリ上限を増やすことができます．

Windowsの場合はいくつかの手順を行う必要があります．まず\code{moremem.reg}という
ファイルに以下の内容を書き込みます：
%
\begin{sverbatim}
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\Software\Cygwin]
"heap_chunk_in_mb"=dword:ffffff00
\end{sverbatim}
%
その上で，管理者権限で\code{regedit /s moremem.reg}を実行してください．（もし
システム全体ではなく，現在利用中のユーザのみについてメモリ上限を変更したい場合は
\var{HKEY\_CURRENT\_USER}を使用してください．）

\section{Web2Cユーザガイド}

\Webc は\TeX 関連プログラムのコレクションです．これには\TeX そのものに加えて\MF,
\MP, \BibTeX などが含まれており，\TL の心臓部と言えます．最新版のマニュアルやその他
の情報はウェブサイト (\url{http://tug.org/web2c}) に掲載されています．

少し\Webc の歴史的経緯について触れておきます．\Webc のオリジナル作者はTomas Rokickiで
1987年に最初の\TeX -to-Cシステムを開発しました．このシステムはHoward TrickeyとPavel
CurtisによるUNIX下のchangefileをベースにしていました．その後Tim Morganがこのシステムの
メンテナとなり，その期間システムはWeb-to-Cと呼ばれていました．1990年にKarl Berryが多く
の協力者の助けを得ながらメンテナンスを引き継ぎました．1997年にOlaf Weberがメンテナに
なりましたが，2006年には再びKarl氏の管理下に戻りました．

\Webc システムはUNIX, 32-bit Windows, \macOS などのOSで動作します．このシステムでは
Knuthによる\TeX のオリジナルソースと，文芸的プログラミングシステム\WEB で書かれた
いくつかの基本的なプログラムを使用し，それらをC言語ソースコードに変換します．このような
方法で管理されている\TeX 関連のプログラムは以下の通りです：
%
\begin{cmddescription}
\item[bibtex] 参考文献の管理
\item[dvicopy] \DVI ファイルで参照されている仮想フォントの展開
\item[dvitomp] \DVI をMPX（\MP 画像）に変換
\item[dvitype] \DVI を可読テキストに変換
\item[gftodvi] Generic fonts (GF) の見本 (\DVI) 作成
\item[gftopk] GFをpacked fonts (PK) に変換
\item[gftype] GFを可読テキストに変換
\item[mf] フォントファミリの作成
\item[mft] \MF ソースを\TeX ファイルに変換
\item[mpost] 図形描画
\item[patgen] ハイフンパターンを作成
\item[pktogf] PKをGFに変換
\item[pktype] PKを可読テキストに変換
\item[pltotf] プレーンテキストのプロパティリストをTFMに変換
\item[pooltype] \WEB プールファイルを表示
\item[tangle] \WEB をPascalに変換
\item[tex] 組版システム
\item[tftopl] TFMをプレーンテキストのプロパティリストに変換
\item[vftovp] 仮想フォントを仮想プロパティリストに変換
\item[vptovf] 仮想プロパティリストを仮想フォントに変換
\item[weave] \WEB を\TeX ファイルに変換
\end{cmddescription}
%
各プログラムの正確な機能やシンタックスについては，それぞれのマニュアルや\Webc 自体の
ドキュメントに記載されています．しかしながら，すべてのプログラムに共通するいくつかの
基本事項を押さえておくと\Webc をインストールする際に役立ちます．

\Webc に含まれるすべてのプログラムは，以下の標準的な\GNU オプションをサポートして
います：
%
\begin{description}
\item[\lopt{help}] 基本的な使用法を表示
\item[\lopt{verbose}] より詳細な実行メッセージを表示
\item[\lopt{version}] バージョン情報を表示して終了
\end{description}

\Webc プログラムはファイル探索に\KPS ライブラリ (\url{http://tug.org/kpathsea}) を
使用します．このライブラリは環境変数と設定ファイルの両方を参照して膨大な量の\TeX
関連ファイルの検索を最適化します．\Webc は多くのTEXMFツリーを同時に参照でき，この
ことがTDSを維持したままローカルまたはユーザごとの拡張を異なるツリーに分離するのに
役立ちます．ファイル検索を高速化するため，各ツリーのルートには配下にあるすべての
ファイルの名前と相対位置を列挙した\file{ls-R}ファイルが置かれています．

\subsection{Kpathseaパス検索}
\label{sec:kpathsea}

まずはじめに，\KPS ライブラリによるパス検索の一般的なメカニズムを紹介します．

\emph{パス要素}（基本的にはディレクトリ名）をコロンまたはセミコロン区切りで並べた
リストを\emph{検索パス}と呼びます．検索パスはさまざまな場所で設定可能です．例えば，
\samp{my-file}を検索パス\samp{.:/dir}から見つける場合，\KPS は各パス要素を順番に
確認します．この場合，まず\file{./my-file}を確認し，次に\file{/dir/my-file}を確認
して最初にみつけたもの（状況によっては，見つけたものすべて）を返します．

あらゆるOSに適切に対応するため，非UNIXシステムにおいては\KPS はコロン (\samp{:}) と
スラッシュ (\samp{/}) 以外の記号をファイル名の区切り文字として扱うことができます．

特定のパス要素$p$を確認する際，\KPS はまず利用可能なファイル名データベース（\ref{%
sec:filename-database}節を参照してください）が$p$について用意されているかを調べます．
すなわち，$p$のプレフィックスにあたるディレクトリにデータベースがあるかを調べ，もし
存在していた場合はその内容に基づいて検索マッチングを行います．

最もシンプルでよくあるパス要素はディレクトリ名ですが，\KPS はそれ以外の機能として
階層的なビルトイン値，環境変数名，設定ファイルの値，ユーザのホームディレクトリ，
そしてサブディレクトリの再帰的な検索などをサポートしています．すなわち，\KPS はパス
要素を様々な指定に従って通常のディレクトリ名に\emph{展開}します．これ以降，この
展開について実際に処理が行われる順番で説明していきます．

ところで，ファイル名が絶対パスもしくは明示的な相対パス（すなわち\samp{/}，\samp{%
./}，\samp{../}のいずれかから始まるもの）で検索された場合は\KPS は，単純にそのパス
位置にファイルがあるか否かを確認します．

\subsubsection{パスの設定元}
\label{sec:path-sources}

検索パスは設定ファイルや環境変数など，さまざまな場所で設定することができます．ここに
すべての設定元を\KPS が使用する順番に列挙しておきます：
%
\begin{enumerate}
\item ユーザが設定している\code{TEXINPUTS}などの環境変数．なお\samp{\meta{変数名}.%
  \meta{プログラム名}}という形の環境変数は，環境変数\samp{\meta{変数名}}を上書き
  します．例えば\samp{latex}が実行中のプログラム名である場合，\code{TEXINPUTS.latex}%
  は\code{TEXINPUTS}を上書きします．
\item プログラムごとの設定ファイル．例えば\prog{dvips}の設定ファイル\file{config.ps}%
  内にある\samp{S /a:/b}のような記述が反映されます．
\item \KPS の設定ファイル\file{texmf.cnf}．\samp{TEXINPUTS=/c:/d}のような設定が並んで
  います．
\item コンパイル時のデフォルト設定．
\end{enumerate}
%
それぞれの変数の値が何に設定されているかは，デバッグオプションを使用すると確認する
ことができます（p.\,\pageref{sec:debugging}の「デバッグアクション」項を参照）．

\subsubsection{設定ファイル}

\KPS は\file{texmf.cnf}という名前の実行時設定ファイルを読み込み，検索パスやその他の
設定を行います．この設定ファイルの検索には検索パス\code{TEXMFCNF}が使用されますが，
この変数の内容を（環境変数を設定することも含め）変更することは推奨されません．

代わりに，通常のインストールを行うと\file{.../2019/texmf.cnf}が生成されます．
どうしてもデフォルト設定を変更する必要が生じた場合は（通常は必要ありません），この
ファイルに変更を加えてください．メインの設定ファイルは\file{.../2019/texmf-dist/%
web2c/texmf.cnf}です．このファイルを変更してもディストリビューション側でアップデート
があると変更内容が失われてしまうため，ユーザはこのファイルを編集すべきではありません．

\KPS 検索パスに含まれる\emph{すべて}の\file{texmf.cnf}を読み込み，その内容を反映
します．この際，検索パスのより前方にあるものの設定はより後方にあるものよりも優先
されます．例えば，検索パス\code{.:\$TEXMF}の下で，\file{./texmf.cnf}は\file{$TEXMF/%
texmf.cnf}の内容を上書きします．

\begin{itemize*}
\item \code{\%}はコメント開始文字で，行末までコメントとして扱われます．
\item 空行は無視されます．
\item 行末の\code{\bs}は行継続文字としてはたらきます．すなわち，次の行の内容も同じ行
  として扱われます．行頭の連続する空白文字は無視されます．
\item ほかの行は次の形式で記述されます：
%
\begin{alltt}
  \meta{変数名}[.\meta{プログラム名}] [=] \meta{値}
\end{alltt}
%
  なお\samp{=}とその前後の空白は省略可能です．
\item \meta{変数名}には空白文字，\samp{=}，\samp{.}以外の任意の文字を含めることが
  できますが\samp{A-Za-z\var{\_}}の範囲に留めておくのが無難です．
\item もし変数名に\samp{.\meta{プログラム名}}が付いている場合は，その変数定義は\meta{%
  プログラム名}または\code{\meta{プログラム名}.exe}という名前のプログラムの実行中のみで
  適用されます．この機能を用いると，例えば\TeX 処理系の種類ごとに異なる検索パスを適用
  することができます．
\item \meta{値}には\samp{\%}と\samp{@}を除く任意の文字を含めることができます．\code{%
  \$\meta{変数}.\meta{プログラム名}}という形の変数は，右辺では使うことができません．
  そのような場合は，必ず別の変数を追加して使用してください．\meta{値}内の\samp{;}は
  UNIX環境下では\samp{:}に置換されます．この機能は1つの\file{texmf.cnf}をUNIX, MS-DOS,
  Windowsで共有するのに便利です．
\item すべての定義は展開される前に読み込まれるので，定義前の変数も右辺に含めることが
  可能です．
\end{itemize*}
%
上記の仕様のほとんどを活用した設定ファイルの例を示しておきます：
%
\verbatiminput{texlive-common/examples/ex5.tex}

\subsubsection{パス展開}
\label{sec:path-expansion}

\KPS はUNIXシェルと同様にいくつかの特殊文字や検索パスの構造を認識します．一般の
例として，複雑なパス\dir{$USER/{foo,bar}//baz}は\var{\$USER}のホームディレクトリ
直下のディレクトリ\dir{foo}と\dir{bar}以下にある，\file{baz}という名前のファイル
またはディレクトリを含むすべてのサブディレクトリに展開されます．これらのパス展開の
詳細については以下のセクションを参照してください．

\subsubsection{デフォルト展開}
\label{sec:default-expansion}

最も優先度の高い検索パス（\ref{sec:path-sources}節を参照）が先頭，末尾または途中
2連続する形で\emph{追加コロン}を含んでいる場合，\KPS はその位置に（もし定義されて
いれば）次に優先度の高いパスを挿入します．もし挿入される次点の検索パスにも追加
コロンが含まれている場合，さらに次に優先度の高いパスが挿入されていきます．例えば
%
\begin{alltt}
> \Ucom{setenv TEXINPUTS /home/karl:}
\end{alltt}
%
のように環境変数が設定されていたとして，\file{texmf.cnf}で設定されている\var{%
TEXINPUTS}の値が
%
\begin{alltt}
  .:\$TEXMF//tex
\end{alltt}
%
のとき，最終的に検索されるパスは次のようになります：
%
\begin{alltt}
  /home/karl:.:\$TEXMF//tex
\end{alltt}
デフォルト値を複数箇所に挿入しても意味がないので，\KPS は追加コロンを1つだけ
デフォルト値に置換し，それ以外はそのままにします．まず先頭にコロンがないか
確認され，続いて末尾コロン，2連続のコロンが順にチェックされます．

\subsubsection{ブレース展開}
\label{sec:brace-expansion}

ブレース展開は便利な機能で，例えば\dir{v{a,b}w}は\code{vaw:vbw}に展開されます．
ネストすることも可能です．この機能は\var{\$TEXMF}にブレースリストを与えることに
より複数の\TeX ヒエラルキーを共存させるのにも利用されています．具体的には\file{%
texmf.cnf}では次のような設定が行われています（この例のために単純化しています）：
%
\begin{verbatim}
  TEXMF = {$TEXMFVAR,$TEXMFHOME,!!$TEXMFLOCAL,!!$TEXMFDIST}
\end{verbatim}
%
この値は，例えば\TeX の入力パスを定義するのに活用できるでしょう：
%
\begin{verbatim}
  TEXINPUTS = .;$TEXMF/tex//
\end{verbatim}
%
この設定の下では，まずカレントディレクトリがチェックされ，続いて\code{\$TEXMFVAR/%
tex}, \code{\$TEXMFHOME/tex}, \code{\$TEXMFLOCAL/tex}, \code{\$TEXMFDIST/tex}ツリー
が（最後2つについては\file{ls-R}データベースを利用しつつ）検索されることになります．
これにより``frozen''なTEXMFツリー（例えばCDに入れてあるもの）と常に最新版にアップ
デートしているTEXMFツリーを並行的に運用しているとして，\var{\$TEXMF}変数をすべての
定義に使用しておけば，常に最新のTEXMFツリーを先に検索するようにすることができます．

\subsubsection{サブディレクトリ展開}
\label{sec:subdirectory-expansion}

パス要素内で，2つ以上の連続するスラッシュがディレクトリ名$d$の後ろに置かれている
場合，$d$以下のすべてのサブディレクトリに展開されます．つまり，まず$d$直下のサブ
ディレクトリが並び，続いてさらにそれらのサブディレクトリのサブディレクトリが並び，
以降も再帰的に続きます．各階層でサブディレクトリがどういう順番で検索されるかは
\emph{決まっていません}．

\samp{//}に続いてファイル名の一部を置いた場合，それとマッチするファイルを含む
サブディレクトリのみが展開結果に含められます．例えば\samp{/a//b}は\file{/a/1/b},
\file{/a/2/b}, \file{/a/1/1/b}などに展開されますが，\file{/a/b/c}や\file{/a/1}には
展開されません．

\samp{//}を1つのパスに複数含めることは可能ですが，パスの先頭に置かれた\samp{//}は
無視されます．

\subsubsection{特殊文字の一覧（要約）}

以下のリストに\KPS 設定ファイルで利用できる特殊文字について要約しておきます：
%
\begin{description}
\newcommand{\CODE}[1]{\makebox[3em][l]{\code{#1}}}
\item[\CODE{:}] パス設定の区切り文字．先頭や末尾に置かれた場合はデフォルトパス展開
  されます．
\item[\CODE{;}] 非UNIXシステムでの区切り文字（挙動は\code{:}と同様）
\item[\CODE{\$}] 変数展開
\item[\CODE{\string~}] ユーザのホームディレクトリを表す
\item[\CODE{\char`\{...\char`\}}] ブレース展開
\item[\CODE{//}] サブディレクトリ展開．先頭を除き，パス中どこでも利用可能
\item[\CODE{\%}] コメントの開始
\item[\CODE{\bs}] 行継続（複数行エントリの記述に使用）
\item[\CODE{!!}] ファイル名データベースの使用を\emph{強制}
  （ディスク検索を\emph{禁止}）
\end{description}

\subsection{ファイル名データベース}
\label{sec:filename-database}

\KPS は検索のためのディスクアクセスをある程度軽減する仕組みを持っています．
それでも，十分な大きさの\TeX インストール構成で指定されたファイルについて，
それが存在する可能性のあるすべてのディレクトリを検索するとかなり長い時間が
かかってしまいます（特に何百ものフォントディレクトリを探索する場合には顕著
です）．そのため\KPS は\file{ls-R}という名前のプレインテキスト「データベース」
にファイルとディレクトリの情報を予め書き込んでおき，過剰なディスクアクセス
を回避しています．

また\file{aliases}というもう1つのデータベースファイルを利用すると，\file{%
ls-R}に含まれているファイル名に別名（エイリアス）を付けることができます．この
機能は，ソースファイルに含まれているDOS 8.3形式のファイル名を確認する際に便利
です．

\subsubsection{ファイル名データベース}
\label{sec:ls-R}

上で説明したように，メインのファイル名データベースの名前は\file{ls-R}です．
ファイル名データベースは，検索対象としたい各\TeX ヒエラルキーの最上位階層に
配置することができます（デフォルトでは\code{\$TEXMF}）．\KPS は\code{TEXMF%
DBS}パスに含まれている\file{ls-R}を読み込みます．

\file{ls-R}の生成・更新には，ディストリビューションに含まれる\cmd{mktexlsr}%
コマンドの利用をおすすめします．このコマンドは種々の\cmd{mktex}\dots
スクリプトから呼び出されます．本質的には，このスクリプトは単に
%
\begin{alltt}
cd \var{/your/texmf/root} && \path|\|ls -1LAR ./ >ls-R
\end{alltt}
%
を実行するだけです．なお，このスクリプトはシステムの\cmd{ls}コマンドが正しい
形式で出力を行うことを前提にしています（{\GNU} \cmd{ls}なら問題ありません）．
データベースが常に最新の状態であることを保証するには，\cmd{cron}を利用して
定期的にデータベースを更新するのが簡単でしょう．そうすることによって，例えば
\LaTeX パッケージをインストールしたりアップデートしたりして，新しいファイルが
配置されたとしても自動的にデータベースが更新されることになります．

データベースにファイルが見つからない場合，デフォルトでは\KPS は処理を続行して
ディスク検索を行います．ただし\samp{!!}から開始するパス要素については，データ
ベース\emph{のみ}が検索され，ディスクが検索されることはありません．

\subsubsection{\cmd{kpsewhich}: パス検索用コマンドラインツール}
\label{sec:invoking-kpsewhich}

\cmd{kpsewhich}コマンドはパス検索を行うための独立したツールです．このコマンド
は\cmd{find}コマンドのように利用して\TeX ヒエラルキーの中にあるファイルを探索
するのに便利です（このプログラムはディストリビューションに含まれる\cmd{mktex}%
\dots スクリプトでも多用されています）．
%
\begin{alltt}
> \Ucom{kpsewhich \meta{オプション}\dots{} \meta{ファイル名}\dots{}}
\end{alltt}

上記の\meta{オプション}は\samp{\sopt{}}または\samp{\lopt{}}で開始して，曖昧で
ない限りどのような省略の仕方をしても指定可能です．

\KPS はオプションでないすべての引数をファイル名として受け取って，それぞれに
ついて見つかった最初のファイルを返します．特定の名前のファイルをすべて列挙する
オプションはありません（そのような場合はUNIXの\cmd{find}コマンドを使用して
ください）．

よく使われるオプションを一覧にしておきます：
%
\begin{description}
\item[\code{\lopt{dpi}=\meta{数値}}]
解像度を\meta{数値}に設定します．このオプションはgeneric fonts (GF) とpacked
fonts (PK) を検索するときにのみ効果を発揮します．\cmd{dvips}に合わせて\sopt{D}%
という省略形も使用できます．デフォルト値は600です．

\item[\code{\lopt{format}=\meta{フォーマット名}}]
検索対象のフォーマットを指定します．デフォルトではフォーマットはファイル名から
推測されます．\MP のサポートファイルや\cmd{dvips}の設定ファイルなど，対応する
（曖昧でない）拡張子がないフォーマットについては，このオプションを用いて明示的
に指定する必要があります．その際\meta{フォーマット名}には\code{tex}や\code{enc
files}などを指定します．具体的なフォーマット名のリストについては\code{kpsewhich
\lopt{help}}を参照してください．

\item[\code{\lopt{mode}=\meta{モード名}}]
モード名を設定します．このオプションもGFおよびPKの検索用です．デフォルト値は
なく，指定しない限りすべてのモードが検索対象になります．

\item[\code{\lopt{must-exist}}]
ディスク検索を含むあらゆる手段を使用して，可能な限りファイル検索を行います．
デフォルトでは，効率重視のため\file{ls-R}データベースのみが検索されます．

\item[\code{\lopt{path}=\meta{パス}}]
ファイル名からパスを推測する代わりに，指定された\meta{パス}（通常通りコロン
区切り）を利用して検索を行います．\samp{//}を含むすべての特殊文字とその展開が
サポートされています．\lopt{path}と\lopt{format}は相容れません．

\item[\code{\lopt{progname}=\meta{プログラム名}}]
プログラム名を設定します．これは\code{.\meta{プログラム名}}接尾辞付きの変数を
介して検索パスに影響を与えます．デフォルトでは\cmd{kpsewhich}です．

\item[\code{\lopt{show-path}=\meta{名前}}]
指定した\meta{名前}と紐づくファイルタイプの検索に用いられるパスを表示します．
\meta{名前}には拡張子 (\code{.pk}, \code{.vf}, etc.) またはファイル名を指定する
ことができ，\lopt{format}オプションも併用できます．

\item[\code{\lopt{debug}=\meta{数値}}]
デバッグレベルを\meta{数値}に設定します．
\end{description}

\subsubsection{使用例}
\label{sec:examples-of-use}

このセクションでは\KPS の実行例をいくつか紹介していきます．まずは単純な検索です：
%
\begin{alltt}
> \Ucom{kpsewhich article.cls}
   /usr/local/texmf-dist/tex/latex/base/article.cls
\end{alltt}
%
この例では\file{article.cls}を検索しています．拡張子\samp{.cls}には曖昧性がない
ので，わざわざファイルタイプ\code{tex}（\TeX のソースファイル）を指定する必要は
ありません．上の例では，目的のファイルは\dir{texmf-dist} \TL ディレクトリ内の
\dir{tex/latex/base}サブディレクトリの中に見つかりました．同様にして，以下に列挙
する例はいずれも曖昧性のない拡張子のおかげで特に問題なくファイルを見つけることが
できます：
%
\begin{alltt}
> \Ucom{kpsewhich array.sty}
   /usr/local/texmf-dist/tex/latex/tools/array.sty
> \Ucom{kpsewhich latin1.def}
   /usr/local/texmf-dist/tex/latex/base/latin1.def
> \Ucom{kpsewhich size10.clo}
   /usr/local/texmf-dist/tex/latex/base/size10.clo
> \Ucom{kpsewhich small2e.tex}
   /usr/local/texmf-dist/tex/latex/base/small2e.tex
> \Ucom{kpsewhich tugboat.bib}
   /usr/local/texmf-dist/bibtex/bib/beebe/tugboat.bib
\end{alltt}
%
ところで，最後の例として挙がっているのは\textsl{TUGboat}の記事用の\BibTeX 文献
データベースです．

\begin{alltt}
> \Ucom{kpsewhich cmr10.pk}
\end{alltt}
%
拡張子\samp{.pk}をもつ，フォントのビットマップグリフファイルは\prog{dvips}や
\prog{xdvi}などのディスプレイプログラムによって使用されます．Computer Modernの
\samp{.pk}ファイルは通常\TL に含まれていないので（デフォルトではType~1変種が
使用されるため），上の例では何も出力されません．

\begin{alltt}
> \Ucom{kpsewhich wsuipa10.pk}
   /usr/local/texmf-var/fonts/pk/ljfour/public/wsuipa/wsuipa10.600pk
\end{alltt}
%
これらのフォント（ワシントン大学で開発された音声記号）については，まず\samp{%
.pk}ファイルを生成する必要があり，\TL における\MF モードはデフォルトでは解像度
600{\dpi} (dots per inch) 設定の\code{ljfour}なので，上のような結果になります．
%
\begin{alltt}
> \Ucom{kpsewhich -dpi=300 wsuipa10.pk}
\end{alltt}
%
続いてのケースでは解像度300\dpi を指定 (\code{\sopt{-dpi}=300}) していますが，
そのようなフォントファイルは存在しないという結果が得られました．\cmd{dvips}や
\cmd{xdvi}などのプログラムは実行を中断し，\cmd{mktexpk}スクリプトを用いて必要な
\samp{.pk}ファイルを生成することになるでしょう．

次に\cmd{dvips}のヘッダおよび設定ファイルについて考えましょう．2004年以来，汎用
の設定ファイル\file{config.ps}と\PS フォントのマップファイル\file{psfonts.map}%
は独自の検索パスと\dir{texmf}ツリー内での配置場所を持っているので，それらを取り
扱う前に\TeX サポートのための汎用プロローグ\file{tex.pro}の例を示しました．
拡張子\samp{.ps}には曖昧性があるので，\file{config.ps}については該当するファイル
タイプ (\code{dvips config}) を明示的に指定する必要があります．
%
\begin{alltt}
> \Ucom{kpsewhich tex.pro}
   /usr/local/texmf/dvips/base/tex.pro
> \Ucom{kpsewhich --format="dvips config" config.ps}
   /usr/local/texmf/dvips/config/config.ps
> \Ucom{kpsewhich psfonts.map}
   /usr/local/texmf/fonts/map/dvips/updmap/psfonts.map
\end{alltt}

今度はURW Timesの\PS サポートファイルについて考えます．標準的なフォント命名規則
に基づけば，これらのプレフィックスは\samp{utm}です．最初に検索するのはマップ
ファイルの名前を格納している設定ファイルです：
%
\begin{alltt}
> \Ucom{kpsewhich --format="dvips config" config.utm}
   /usr/local/texmf-dist/dvips/psnfss/config.utm
\end{alltt}
%
このファイルには
%
\begin{alltt}
  p +utm.map
\end{alltt}
%
という記述があり，\file{utm.map}を参照しているので，続いてこのファイルの位置を
確認してみましょう：
%
\begin{alltt}
> \Ucom{kpsewhich utm.map}
   /usr/local/texmf-dist/fonts/map/dvips/times/utm.map
\end{alltt}
%
このマップファイルはURWコレクションに含まれるType~1 \PS フォントのファイル名を
定義しています．ファイルには下記のような記述が並んでいます（以下は抜粋です）：
%
\begin{alltt}
utmb8r  NimbusRomNo9L-Medi    ... <utmb8a.pfb
utmbi8r NimbusRomNo9L-MediItal... <utmbi8a.pfb
utmr8r  NimbusRomNo9L-Regu    ... <utmr8a.pfb
utmri8r NimbusRomNo9L-ReguItal... <utmri8a.pfb
utmbo8r NimbusRomNo9L-Medi    ... <utmb8a.pfb
utmro8r NimbusRomNo9L-Regu    ... <utmr8a.pfb
\end{alltt}
%
例えば，Times Romanを例にとって，\file{texmf}ディレクトリ内における\file{%
utmr8a.pfb}ファイルの位置を検索してみます：
%
\begin{alltt}
> \Ucom{kpsewhich utmr8a.pfb}
   /usr/local/texmf-dist/fonts/type1/urw/times/utmr8a.pfb
\end{alltt}

ここまでの例が，いかに簡単に指定したファイルを見つけることができるかを示して
いるはずです．ここで示したテクニックは，何らかの理由で間違ったバージョンの
ファイルが使用されてしまっていると疑われるときに特に役立ちます．\cmd{kpsewhich}%
コマンドを用いれば，どのファイルが一番最初に見つかっているのかを確認することが
できます．

\subsubsection{デバッグアクション}
\label{sec:debugging}

ときとして，あるプログラムがファイル参照をどのように解決しているかについて調査
する必要が生じる場合があります．そのような場合のために，\KPS はさまざまなレベル
のデバッグオプションを提供しています：
%
\begin{description}
\makeatletter
\setbox\z@=\hbox{\code{00}}
\newcommand{\dbgitem}[1]{\item[\code{\hbox to\wd\z@{\hfill #1}}]}
\makeatother

\dbgitem{1}
\code{stat}コマンドによるディスク検索の状況．きちんと更新された\file{ls-R}データ
ベースを使用して検索が行われている場合，このデバッグオプションはほとんど何も出力
しないはずです．

\dbgitem{2}
ハッシュテーブルの参照（\file{ls-R}，マップファイル，設定ファイルなど）．

\dbgitem{4}
ファイルI/O操作．

\dbgitem{8}
各ファイルタイプに適用されるパスの情報．これは特定のファイルに対する検索パスが
どこで定義されているのかを調べるのに役立ちます．

\dbgitem{16}
各パス要素に属するディレクトリの一覧（ディスク検索にのみ関係）．

\dbgitem{32}
ファイル検索．

\dbgitem{64}
変数の値．
\end{description}
%
デバッグレベルを\code{-1}に設定すると上のすべてが有効になります．多くの場合，
実用上はこれが一番便利でしょう．

同様に\cmd{dvips}プログラムでも，デバッグオプションをいくつか組み合わせることで
どこのファイルが読み込まれているか詳細を確認することができます．またファイルが
見つからない場合に，デバッグ出力はプログラムがどこに対してファイル検索を行った
かを示してくれるので，どこに問題があるのかを把握することができます．

一般的に言って，\KPS ライブラリは多くのプログラムから内部的に呼び出されるもの
なので，デバッグオプションは環境変数\var{KPATHSEA\_DEBUG}を上記リストの値
（もしくはそれらの組み合わせ）に設定することによって指定するのがよいでしょう．
\footnote{Windowsユーザ向けの情報：Windowsではすべてのデバッグメッセージを1つの
ファイルにリダイレクトするのは困難です．デバッグの際は，一時的に\code{SET
\var{KPATHSEA\_DEBUG\_OUTPUT}=err.log}などと設定するのがよいでしょう}

例として，以下のような内容の小さな\LaTeX ソースファイル\file{hello-world.tex}を
考えてみます．
%
\begin{verbatim}
  \documentclass{article}
  \begin{document}
  Hello World!
  \end{document}
\end{verbatim}
%
この小さなファイルは\file{cmr10}フォントのみを使用するのですが，\cmd{dvips}が
どのように\PS ファイルを用意するのか確認してみましょう（ここではComputer Modern%
のType~1バージョンを使用したいので\sopt{Pcms}を指定します）．
%
\begin{alltt}
> \Ucom{dvips -d4100 hello-world -Pcms -o}
\end{alltt}
%
上記の例では\cmd{dvips}のデバッグクラス4（フォントパス）と\KPS のパス要素展開を
組み合わせました（\cmd{dvips}のリファレンスマニュアルを参照）．この出力（かなり
いじっていますが）を図\ref{fig:dvipsdbga}に示します．
%
\begin{figure*}[tp]
\centering
\input{texlive-common/examples/ex6a.tex}
\caption{設定ファイルを見つける}
\label{fig:dvipsdbga}
\end{figure*}
%
\cmd{dvips}は起動後，まず作業ファイルを探します．はじめに他のファイルの検索に
用いられる検索パスを定義する\file{texmf.cnf}が見つかり，続いてファイル検索を
最適化するファイル名データベース\file{ls-R}とエイリアスを定義している\file{%
aliases}が見つかります．\cmd{dvips}はさらに汎用の設定ファイル\file{config.ps}%
やカスタマイズ設定を記述する\file{.dvipsrc}を探し出します（上の例では，後者は
``not found''という結果になっています）．最後に\cmd{dvips}はComputer Modernの
\PS フォント用の設定ファイル\file{config.cms}を探します（これは\sopt{Pcms}の
効果です）．このファイルには\TeX 間の関係を定義するマップファイルのリストが
記述されています．
%
\begin{alltt}
> \Ucom{more /usr/local/texmf/dvips/cms/config.cms}
   p +ams.map
   p +cms.map
   p +cmbkm.map
   p +amsbkm.map
\end{alltt}
%
\cmd{dvips}はこのようにしてすべてのファイルを見つけ，さらに常に使用されること
になっている汎用マップファイル\file{psfonts.map}も読み込みます（このファイル
ではすべての\PS フォントに共通する定義が行われています．\PS マップファイルの
取り扱いの詳細については\ref{sec:examples-of-use}節の最後の部分を参照して
ください）．

ここにきて，\cmd{dvips}はやっとプログラム自身の情報をユーザに提示します：
%
\begin{alltt}
This is dvips(k) 5.92b Copyright 2002 Radical Eye Software (www.radicaleye.com)
\end{alltt}
%
その後プロローグファイルが検索されます：
%
\begin{alltt}\small
kdebug:start search(file=texc.pro, must_exist=0, find_all=0,
  path=.:~/tex/dvips//:!!/usr/local/texmf/dvips//:
       ~/tex/fonts/type1//:!!/usr/local/texmf/fonts/type1//).
kdebug:search(texc.pro) => /usr/local/texmf/dvips/base/texc.pro
\end{alltt}

以上で必要なファイルが揃ったので，\cmd{dvips}は日付と時刻を出力し，そして
\file{hello-world.ps}というファイルが生成されることを予告します．合わせて，
そのファイル生成の際にはフォントファイル\file{cmr10}が必要であることと，その
フォントが``resident''（ビットマップ不要）として扱われる旨が表示されます．
%
\begin{alltt}\small
TeX output 1998.02.26:1204' -> hello-world.ps
Defining font () cmr10 at 10.0pt
Font cmr10 <CMR10> is resident.
\end{alltt}

これでやっと\file{cmr10.tfm}の検索が行われ，それが見つかれば，もういくつかの
プロローグファイルが参照され（出力には出ていません），最終的にType~1のフォント
実体\file{cmr10.pfb}が出力ファイルに含まれることになります（最終行）．
%
\begin{alltt}\small
kdebug:start search(file=cmr10.tfm, must\_exist=1, find\_all=0,
  path=.:~/tex/fonts/tfm//:!!/usr/local/texmf/fonts/tfm//:
       /var/tex/fonts/tfm//).
kdebug:search(cmr10.tfm) => /usr/local/texmf/fonts/tfm/public/cm/cmr10.tfm
kdebug:start search(file=texps.pro, must\_exist=0, find\_all=0,
   ...
<texps.pro>
kdebug:start search(file=cmr10.pfb, must\_exist=0, find\_all=0,
  path=.:~/tex/dvips//:!!/usr/local/texmf/dvips//:
       ~/tex/fonts/type1//:!!/usr/local/texmf/fonts/type1//).
kdebug:search(cmr10.pfb) => /usr/local/texmf/fonts/type1/public/cm/cmr10.pfb
<cmr10.pfb>[1]
\end{alltt}

%\subsection{Runtime options}
%
%Another useful feature of \Webc{} is its possibility to control a number
%of memory parameters (in particular, array sizes) via the runtime file
%\file{texmf.cnf} read by \KPS{}.  The memory settings can be found in
%Part~3 of that file in the \TL{} distribution. The more important
%are:
%
%\begin{ttdescription}
%\item[\texttt{main\_memory}]
%  Total words of memory available, for
%  \TeX{}, \MF{} and \MP.  You must make a new format file for each
%  different setting. For instance, you could generate a ``huge''
%  version of \TeX{}, and call the format file \texttt{hugetex.fmt}.
%  Using the standard way of specifying the program name used by \KPS{},
%  the particular value of the \texttt{main\_memory} variable will then
%  be read from \file{texmf.cnf}.
%\item[\texttt{extra\_mem\_bot}]
%  Extra space for ``large'' \TeX{} data structures:
%  boxes, glue, breakpoints, etc.  Especially useful if you use
%  \PiCTeX{}.
%\item[\texttt{font\_mem\_size}]
%  Number of words for font information available for \TeX. This
%  is more or less the total size of all TFM files read.
%\item[\texttt{hash\_extra}]
%  Additional space for the hash table of control sequence names.
%  Only $\approx$10,000 control sequences can be stored in the main
%  hash table; if you have a large book with numerous cross-references,
%  this might not be enough.  The default value of
%  \texttt{hash\_extra} is \texttt{50000}.
%\end{ttdescription}
%
%\noindent Of course, this facility is no substitute for truly dynamic
%arrays and memory allocation, but since these are extremely difficult to
%implement in the present \TeX{} source, these runtime parameters provide
%a practical compromise allowing some flexibility.
%
%
%\begin{comment}
%\section{Building on a new Unix platform}
%
%If you have a platform for which executables are not included, you will
%need to compile \TeX{} and friends. This is not as hard as it
%sounds. What you need is all in the directory \texttt{source} in the
%distribution.
%
%\subsection{Prerequisites}
%
%You will need at least 100 megabytes of disk space to compile all of
%\TeX{} and its support programs. You'll also need an ANSI C
%compiler, a \cmd{make} utility, a lexical scanner, and a parser
%generator. We recommend the \GNU version of these programs
%(\cmd{gcc}, \GNU \cmd{make}, \cmd{m4}, \cmd{flex},
%\cmd{bison}).  You may be able to work with other C compilers and
%\cmd{make} programs, but you will need a good understanding of
%building Unix programs to sort out problems.
%
%Also, the command \texttt{uname} must return a sensible value.
%
%
%\subsection{Configuration}
%
%To begin, perform a normal installation of \TL{} to your disk (see
%section~\ref{sec:install-disk} on
%\p.\pageref{sec:install-disk}).  You may wish to skip installing
%all of the prebuilt binaries.
%
%Then, unpack the source from the compressed \texttt{tar} file in the
%directory \dirname{source} to your disk and change directory to where
%you placed it.
%
%Next, run \cmd{configure} with a command line like this:
%\begin{alltt}
%> \Ucom{sh configure -prefix=/usr/local/TeX}
%\end{alltt}
%
%The \optname{-prefix} directory is the one where you installed the
%support tree; the directory layout will be as follows (where \$TEXDIR
%stands for the directory you chose):
%
%\noindent
%\begin{tabular}{>{\ttfamily}ll@{}}
%  \dirname{$TEXDIR/share/texmf}          & main tree with fonts,\\
%                                         & \qquad macros, etc\\
%  \dirname{$TEXDIR/man}                  & Unix manual pages\\
%  \dirname{$TEXDIR/info}                 & \GNU style Info manuals\\
%  \dirname{$TEXDIR/bin/$PLATFORM}        & binaries\\
%\end{tabular}
%%$
%
%If you want to leave out the \dirname{$PLATFORM} directory level,
%i.e., put the binaries directly into \dirname{$TEXDIR/bin}, specify
%the \verb|--disable-multiplatform| option to \cmd{configure}.
%
%Have a look at the output of \verb|./configure --help| for more
%options you can use.  For example, you can skip building of \OMEGA{} and
%\eTeX{}.
%
%
%\subsection{Running \cmd{make}}
%
%Make sure the shell variable or option \texttt{noclobber} is not set.
%Then, run the main \cmd{make} like this:
%\begin{alltt}
%> \Ucom{make world}
%\end{alltt}
%and relax\ldots
%
%Alternatively, you want to log all the output, as in:
%\begin{alltt}
%> \Ucom{sh -c "make world >world.log 2>\&1" \&}
%\end{alltt}
%
%Before you believe that everything went ok, please check the log file
%for errors: \GNU \cmd{make} always uses the string \samp{***}
%whenever a command fails.  Also, check if all the programs were built:
%
%\begin{alltt}
%> \Ucom{cd \var{TEXDIR}/bin/\var{archname}}
%> \Ucom{ls | wc}
%\end{alltt}
%The result should be over 200 (you can check the exact number with the
%\dirname{bin} directory contents in the distribution).
%
%If you need special privileges for \texttt{make install}, you can
%separate the \samp{make world} into two different runs, like this:
%\begin{alltt}
%> \Ucom{make all}
%> \Ucom{su}
%> \Ucom{make install strip}
%\end{alltt}
%
%After you've installed your new binaries, you should follow the normal
%post-installation procedures, given in section~\ref{sec:postinstall}
%(\p.\pageref{sec:postinstall}).
%
%Also, if you'd like to make your binaries available to others, please
%contact us.  We'll be happy to put them on the \TL\ web pages.
%\end{comment}
%
%
%\htmlanchor{ack}
%\section{Acknowledgements}
%
%\TL{} is a joint effort by virtually all of the \TeX{} user groups.
%This edition of \TL{} was overseen by Karl Berry.  The other principal
%contributors, past and present, are listed below.
%
%\begin{itemize*}
%
%\item The English, German, Dutch, and Polish \TeX{} user groups
%(TUG, DANTE e.V., NTG, and GUST,
%respectively), which provide the necessary technical and administrative
%infrastructure.  Please join the \TeX\ user group near you!  (See
%\url{http://tug.org/usergroups.html}.)
%
%\item The CTAN team (\url{http://ctan.org}), which distributes
%the \TL{} images and provides the common infrastructure for package
%updates, upon which \TL{} depends.
%
%\item Nelson Beebe, for making many platforms available to \TL\
%developers, and his own comprehensive testing and unparalleled
%bibliographic efforts.
%
%\item John Bowman, for making many changes to his advanced graphics
%program Asymptote to make it work in \TL.
%
%\item Peter Breitenlohner and the \eTeX\ team for the stable foundation
%of future \TeX's, and Peter specifically for years of stellar help with
%\GNU\ autotools and keeping sources up to date.  Peter passed away in
%October 2015, and we dedicate the continuing work to his memory.
%
%\item Jin-Hwan Cho and all of the DVIPDFM$x$ team, for their
%excellent driver and responsiveness to configuration issues.
%
%\item Thomas Esser, without whose marvelous \teTeX{} package \TL{}
%would have never existed.
%
%\item Michel Goossens, who co-authored the original documentation.
%
%\item Eitan Gurari, whose \TeX4ht is used to create the \HTML{}
%version of this documentation, and who worked tirelessly to improve it
%at short notice, every year.  Eitan prematurely passed away in June
%2009, and we dedicate this documentation to his memory.
%
%\item Hans Hagen, for much testing and making his \ConTeXt\ package
%(\url{http://pragma-ade.com}) work within \TL's framework.
%
%\item \Thanh, Martin Schr\"oder, and the pdf\TeX\ team
%(\url{http://pdftex.org}), for continuing enhancements of \TeX's
%abilities.
%
%\item Hartmut Henkel, for significant development contributions to
%pdf\TeX\, Lua\TeX, and more.
%
%\item Taco Hoekwater, for major renewed development efforts on MetaPost and
%(Lua)\TeX\ (\url{http://luatex.org}) itself, incorporating
%\ConTeXt\ into \TL, giving Kpathsea multi-threaded functionality, and
%much more.
%
%\item Khaled Hosny, for substantial work on \XeTeX, DVIPDFM$x$, and
%efforts with Arabic and other fonts.
%
%\item Pawe{\l} Jackowski, for the Windows installer \cmd{tlpm},
%and Tomasz {\L}uczak, for \cmd{tlpmgui}, used in past releases.
%
%\item Akira Kakuto, for providing the Windows
%binaries from his W32TEX distribution for Japanese \TeX\
%(\url{http://w32tex.org}), and many other development contributions.
%
%\item Jonathan Kew, for developing the remarkable \XeTeX{} engine and
%taking the time and trouble to integrate it in \TL{}, as well as the
%initial version of the Mac\TeX\ installer, and also for our recommended
%front-end \TeX{}works.
%
%\item Dick Koch, for maintaining Mac\TeX\ (\url{http://tug.org/mactex})
%in very close tandem with \TL{}, and for his great good cheer in doing
%so.
%
%\item Reinhard Kotucha, for major contributions to the \TL{} 2008
%infrastructure and installer, as well as Windows research efforts, the
%\texttt{getnonfreefonts} script, and more.
%
%\item Siep Kroonenberg, also for major contributions to the \TL{} 2008
%infrastructure and installer, especially on Windows, and for the bulk of
%work updating this manual describing those features.
%
%\item Mojca Miklavec, for much help with \ConTeXt, building many binary
%sets, and plenty more.
%
%\item Heiko Oberdiek, for the \pkg{epstopdf} package and many
%others, compressing the huge \pkg{pst-geo} data files so we could
%include them, and most of all, for his remarkable work on
%\pkg{hyperref}.
%
%\item Petr Ol\v{s}ak, who coordinated and checked all the Czech and Slovak
%material very carefully.
%
%\item Toshio Oshima, for his \cmd{dviout} previewer for Windows.
%
%\item Manuel P\'egouri\'e-Gonnard, for helping with package updates,
%documentation improvements, and \cmd{texdoc} development.
%
%\item Fabrice Popineau, for the original Windows support in \TL{} and
%work on the French documentation.
%
%\item Norbert Preining, the principal architect of the current \TL{}
%infrastructure and installer, and also for coordinating the Debian
%version of \TL{} (together with Frank K\"uster), and doing so much work
%along the way.
%
%\item Sebastian Rahtz, for originally creating \TL{} and maintaining it
%for many years.  Sebastian passed away in March 2016, and we dedicate
%the continuing work to his memory.
%
%\item Luigi Scarso, for continuing development of MetaPost, Lua\TeX, and
%much more.
%
%\item Tomasz Trzeciak, for wide-ranging help with Windows.
%
%\item Vladimir Volovich, for substantial help with porting and other
%maintenance issues, and especially for making it feasible to include
%\cmd{xindy}.
%
%\item Staszek Wawrykiewicz, a principal tester for all of \TL{},
%and coordinator of the many major Polish contributions: fonts, Windows
%installation, and more.  Staszek passed away in February 2018, and we
%dedicate the continuing work to his memory.
%
%\item Olaf Weber, for his patient maintenance of \Webc\ in past years.
%
%\item Gerben Wierda, for creating and maintaining the original \MacOSX\
%support.
%
%\item Graham Williams, the originator of the \TeX\ Catalogue.
%
%\end{itemize*}
%
%Builders of the binaries:
%Marc Baudoin (\pkg{amd64-netbsd}, \pkg{i386-netbsd}),
%Ken Brown (\pkg{i386-cygwin}, \pkg{x86\_64-cygwin}),
%Simon Dales (\pkg{armhf-linux}),
%Johannes Hielscher (\pkg{aarch64-linux}),
%Akira Kakuto (\pkg{win32}),
%Dick Koch (\pkg{x86\_64-darwin}),
%Nikola Le\v{c}i\'c (\pkg{amd64-freebsd}, \pkg{i386-freebsd}),
%Henri Menke (\pkg{x86\_64-linuxmusl}),
%Mojca Miklavec (\pkg{i386-linux},
%                \pkg{x86\_64-darwinlegacy},
%                \pkg{i386-solaris}, \pkg{x86\_64-solaris},
%                \pkg{sparc-solaris}),
%Norbert Preining (\pkg{x86\_64-linux}).
%For information on the \TL{} build process, see
%\url{http://tug.org/texlive/build.html}.
%
%Translators of this manual:
%Denis Bitouz\'e \& Patrick Bideault (French),
%Carlos Enriquez Figueras (Spanish),
%Jjgod Jiang, Jinsong Zhao, Yue Wang, \& Helin Gai (Chinese),
%Nikola Le\v{c}i\'c (Serbian),
%Marco Pallante \& Carla Maggi (Italian),
%Petr Sojka \& Jan Busa (Czech\slash Slovak),
%Boris Veytsman (Russian),
%Zofia Walczak (Polish),
%Uwe Ziegenhagen (German).  The \TL{} documentation web page
%is \url{http://tug.org/texlive/doc.html}.
%
%Of course the most important acknowledgement must go to Donald Knuth,
%first for inventing \TeX, and then for giving it to the world.
%
%
%\section{Release history}
%\label{sec:history}
%
%\subsection{Past}
%
%Discussion began in late 1993 when the Dutch \TeX{} Users Group was
%starting work on its 4All\TeX{} \CD{} for MS-DOS users, and it
%was hoped at that time to issue a single, rational, \CD{} for all
%systems. This was too ambitious a target for the time, but it did spawn
%not only the very successful 4All\TeX{} \CD{}, but also the TUG
%Technical Council working group on a \emph{\TeX{} Directory Structure}
%(\url{http://tug.org/tds}), which specified how to create consistent and
%manageable collections of \TeX{} support files. A complete draft of the
%\TDS{} was published in the December 1995 issue of \textsl{TUGboat}, and
%it was clear from an early stage that one desirable product would be a
%model structure on \CD{}. The distribution you now have is a very direct
%result of the working group's deliberations. It was also clear that the
%success of the 4All\TeX{} \CD{} showed that Unix users would benefit
%from a similarly easy system, and this is the other main strand of
%\TL.
%
%We first undertook to make a new Unix-based \TDS{} \CD{} in the autumn
%of 1995, and quickly identified Thomas Esser's \teTeX{} as the ideal
%setup, as it already had multi-platform support and was built with
%portability across file systems in mind. Thomas agreed to help, and work
%began seriously at the start of 1996. The first edition was released in
%May 1996. At the start of 1997, Karl Berry completed a major new release
%of Web2c, which included nearly all the features which Thomas Esser had
%added in \teTeX, and we decided to base the 2nd edition of the \CD{} on
%the standard \Webc, with the addition of \teTeX's \texttt{texconfig}
%script. The 3rd edition of the \CD{} was based on a major revision of
%\Webc, 7.2, by Olaf Weber; at the same time, a new revision of \teTeX
%was being made, and \TL{} included almost all of its features. The
%4th edition followed the same pattern, using a new version of \teTeX,
%and a new release of \Webc{} (7.3).  The system now included a complete
%Windows setup, thanks to Fabrice Popineau.
%
%For the 5th edition (March 2000) many parts of the \CD{} were revised
%and checked, updating hundreds of packages. Package details were stored
%in XML files. But the major change for \TeX\ Live 5 was that all
%non-free software was removed. Everything in \TL{} is now intended
%to be compatible with the Debian Free Software Guidelines
%(\url{http://www.debian.org/intro/free}); we have done our best to check
%the license conditions of all packages, but we would very much
%appreciate hearing of any mistakes.
%
%The 6th edition (July 2001) had much more material updated. The major
%change was a new install concept: the user could select a more exact set
%of needed collections. Language-related collections were completely
%reorganized, so selecting any of them installs not only macros, fonts,
%etc., but also prepares an appropriate \texttt{language.dat}.
%
%The 7th edition of 2002 had the notable addition of \MacOSX{} support,
%and the usual myriad of updates to all sorts of packages and
%programs. An important goal was integration of the source back with
%\teTeX, to correct the drift apart in versions~5 and~6.
%
%\subsubsection{2003}
%
%In 2003, with the continuing flood of updates and additions, we found
%that \TL{} had grown so large it could no longer be contained on a
%single \CD, so we split it into three different distributions (see
%section~\ref{sec:tl-coll-dists}, \p.\pageref{sec:tl-coll-dists}).  In
%addition:
%
%\begin{itemize*}
%\item At the request of the \LaTeX{} team, we changed the standard
%      \cmd{latex} and \cmd{pdflatex} commands to now use \eTeX{} (see
%      \p.\pageref{text:etex}).
%\item The new Latin Modern fonts were included (and are recommended).
%\item Support for Alpha OSF was removed
%      (HPUX support was removed previously), since no one had (or
%      volunteered) hardware available on which to compile new binaries.
%\item Windows setup was substantially changed; for the first time
%      an integrated environment based on XEmacs was introduced.
%\item Important supplementary programs for Windows
%      (Perl, Ghost\-script, Image\-Magick, Ispell) are now installed
%      in the \TL{} installation directory.
%\item Font map files used by \cmd{dvips}, \cmd{dvipdfm}
%      and \cmd{pdftex} are now generated by the new program
%      \cmd{updmap} and installed into \dirname{texmf/fonts/map}.
%\item \TeX{}, \MF{}, and \MP{} now, by default, output most input
%      characters (32 and above) as themselves in output (e.g.,
%      \verb|\write|) files,
%      log files, and the terminal, i.e., \emph{not} translated using the
%      \verb|^^| notation.  In \TL{}~7, this translation was
%      dependent on the system locale settings; now, locale settings do
%      not influence the \TeX{} programs' behavior.  If for some reason
%      you need the \verb|^^| output, rename the file
%      \verb|texmf/web2c/cp8bit.tcx|.  (Future releases will have cleaner
%      ways to control this.)
%\item This documentation was substantially revised.
%\item Finally, since the edition numbers had grown unwieldy,
%      the version is now simply identified by the year: \TL{} 2003.
%\end{itemize*}
%
%
%\subsubsection{2004}
%
%2004 saw many changes:
%
%\begin{itemize}
%
%\item If you have locally-installed fonts which use their own
%\filename{.map} or (much less likely) \filename{.enc} support files, you
%may need to move those support files.
%
%\filename{.map} files are now searched for in subdirectories of
%\dirname{fonts/map} only (in each \filename{texmf} tree), along the
%\code{TEXFONTMAPS} path.  Similarly, \filename{.enc} files are now
%searched for in subdirectories of \dirname{fonts/enc} only, along the
%\code{ENCFONTS} path.  \cmd{updmap} will attempt to warn about
%problematic files.
%
%For methods of handling this and other information, please see
%\url{http://tug.org/texlive/mapenc.html}.
%
%\item The \TK\ has been expanded with the addition of a \MIKTEX-based
%installable \CD, for those who prefer that implementation to Web2C.
%See section~\ref{sec:overview-tl} (\p.\pageref{sec:overview-tl}).
%
%\item Within \TL, the single large \dirname{texmf} tree of previous
%releases has been replaced by three: \dirname{texmf},
%\dirname{texmf-dist}, and \dirname{texmf-doc}.  See
%section~\ref{sec:tld} (\p.\pageref{sec:tld}), and the \filename{README}
%files for each.
%
%\item All \TeX-related input files are now collected in
%the \dirname{tex} subdirectory of \dirname{texmf*} trees, rather than
%having separate sibling directories \dirname{tex}, \dirname{etex},
%\dirname{pdftex}, \dirname{pdfetex}, etc.  See
%\CDref{texmf-dist/doc/generic/tds/tds.html\#Extensions}
%{\texttt{texmf-dist/doc/generic/tds/tds.html\#Extensions}}.
%
%\item Helper scripts (not meant to be invoked by users) are now located
%in a new \dirname{scripts} subdirectory of \dirname{texmf*} trees, and
%can be searched for via \verb|kpsewhich -format=texmfscripts|.  So if you have
%programs which call such scripts, they'll need to be adjusted.  See
%\CDref{texmf-dist/doc/generic/tds/tds.html\#Scripts}
%{\texttt{texmf-dist/doc/generic/tds/tds.html\#Scripts}}.
%
%\item Almost all formats leave most characters printable as
%themselves via the ``translation file'' \filename{cp227.tcx}, instead of
%translating them with the \verb|^^| notation.  Specifically, characters
%at positions 32--256, plus tab, vertical tab, and form feed are
%considered printable and not translated.  The exceptions are plain \TeX\
%(only 32--126 printable), \ConTeXt\ (0--255 printable), and the
%\OMEGA-related formats.  This default behavior is almost the same as in
%\TL\,2003, but it's implemented more cleanly, with more possibilities
%for customization.  See \CDref{texmf-dist/doc/web2c/web2c.html\#TCX-files}
%{\texttt{texmf-dist/doc/web2c/web2c.html\#TCX-files}}.
%(By the way, with Unicode input, \TeX\ may output partial character
%sequences when showing error contexts, since it is byte-oriented.)
%
%\item \textsf{pdfetex} is now the default engine for all formats
%except (plain) \textsf{tex} itself.  (Of course it generates DVI
%when run as \textsf{latex}, etc.)  This means, among other things, that
%the microtypographic features of \textsf{pdftex} are available in
%\LaTeX, \ConTeXt, etc., as well as the \eTeX\ features
%(\OnCD{texmf-dist/doc/etex/base/}).
%
%It also means it's \emph{more important than ever} to use the
%\pkg{ifpdf} package (works with both plain and \LaTeX) or equivalent
%code, because simply testing whether \cs{pdfoutput} or some other
%primitive is defined is not a reliable way to determine if PDF
%output is being generated.  We made this backward compatible as best we
%could this year, but next year, \cs{pdfoutput} may be defined even when
%DVI is being written.
%
%\item pdf\TeX\ (\url{http://pdftex.org}) has many new features:
%
%  \begin{itemize*}
%
%  \item \cs{pdfmapfile} and \cs{pdfmapline} provide font map support
%  from within a document.
%
%  \item Microtypographic font expansion can be used more easily.\\
%  \url{http://www.ntg.nl/pipermail/ntg-pdftex/2004-May/000504.html}
%
%  \item All parameters previously set through the special configuration
%  file \filename{pdftex.cfg} must now be set through primitives,
%  typically in \filename{pdftexconfig.tex}; \filename{pdftex.cfg} is no
%  longer supported.  Any extant \filename{.fmt} files must be redumped
%  when \filename{pdftexconfig.tex} is changed.
%
%  \item See the pdf\TeX\ manual for more: \OnCD{texmf-dist/doc/pdftex/manual/pdftex-a.pdf}.
%
%  \end{itemize*}
%
%\item The \cs{input} primitive in \cmd{tex} (and \cmd{mf} and
%\cmd{mpost}) now accepts double quotes containing spaces and other
%special characters.  Typical examples:
%\begin{verbatim}
%\input "filename with spaces"   % plain
%\input{"filename with spaces"}  % latex
%\end{verbatim}
%See the Web2C manual for more: \OnCD{texmf-dist/doc/web2c}.
%
%\item enc\TeX\ support is now included within Web2C and consequently all
%\TeX\ programs, via the \optname{-enc} option\Dash \emph{only when
%formats are built}.  enc\TeX\ supports general re-encoding of input and
%output, enabling full support of Unicode (in UTF-8).  See
%\OnCD{texmf-dist/doc/generic/enctex/} and
%\url{http://www.olsak.net/enctex.html}.
%
%\item Aleph, a new engine combining \eTeX\ and \OMEGA, is available.
%A little information is available in \OnCD{texmf-dist/doc/aleph/base}
%and \url{http://www.tex.ac.uk/cgi-bin/texfaq2html?label=aleph}.  The
%\LaTeX-based format for Aleph is named \textsf{lamed}.
%
%\item The latest \LaTeX\ release has a new version of the
%LPPL\Dash now officially a Debian-approved license.  Assorted
%other updates, see the \filename{ltnews} files in
%\OnCD{texmf-dist/doc/latex/base}.
%
%\item \cmd{dvipng}, a new program for converting DVI to
%PNG image files, is included.  See
%\url{http://www.ctan.org/pkg/dvipng}.
%
%\item We reduced the \pkg{cbgreek} package to a ``medium'' sized set
%of fonts, with the assent and advice of the author (Claudio Beccari).
%The excised fonts are the invisible, outline, and transparency ones,
%which are relatively rarely used, and we needed the space.  The full set
%is of course available from CTAN
%(\url{http://mirror.ctan.org/tex-archive/fonts/greek/cbfonts}).
%
%\item \cmd{oxdvi} has been removed; just use \cmd{xdvi}.
%
%\item The \cmd{ini} and \cmd{vir} commands (links) for
%\cmd{tex}, \cmd{mf}, and \cmd{mpost} are no longer created,
%such as \cmd{initex}.  The \cmd{ini} functionality has been
%available through the command-line option \optname{-ini} for years now.
%
%\item \textsf{i386-openbsd} platform support was removed.  Since the
%\pkg{tetex} package in the BSD Ports system is available, and
%GNU/Linux and FreeBSD binaries were available, it seemed
%volunteer time could be better spent elsewhere.
%
%\item On \textsf{sparc-solaris} (at least), you may have to set the
%\code{LD\_LIBRARY\_PATH} environment variable to run the
%\pkg{t1utils} programs.  This is because they are compiled with C++,
%and there is no standard location for the runtime libraries.  (This is
%not new in 2004, but wasn't previously documented.)  Similarly, on
%\textsf{mips-irix}, the MIPSpro 7.4 runtimes are required.
%
%\end{itemize}
%
%\subsubsection{2005}
%
%2005 saw the usual huge number of updates to packages and programs.
%The infrastructure stayed relatively stable from 2004, but inevitably
%there were some changes there as well:
%
%\begin{itemize}
%
%\item New scripts \cmd{texconfig-sys}, \cmd{updmap-sys}, and
%      \cmd{fmtutil-sys} were introduced, which modify the
%      configuration in the system trees.  The \cmd{texconfig},
%      \cmd{updmap}, and \cmd{fmtutil} scripts now modify
%      user-specific files, under \dirname{$HOME/.texlive2005}.
%
%\item Corresponding new variables \code{TEXMFCONFIG} and
%      \code{TEXMFSYSCONFIG} to specify the trees where configuration
%      files (user or system, respectively) are found.  Thus, you may
%      need to move personal versions of \filename{fmtutil.cnf} and
%      \filename{updmap.cfg} to these places; another option is to
%      redefine \code{TEXMFCONFIG} or \code{TEXMFSYSCONFIG} in
%      \filename{texmf.cnf}. In any case the real location of these files
%      and the values of \code{TEXMFCONFIG} and \code{TEXMFSYSCONFIG}
%      must agree.
%      See section~\ref{sec:texmftrees}, \p.\pageref{sec:texmftrees}.
%
%\item Last year, we kept \verb|\pdfoutput| and other primitives undefined
%      for \DVI\ output, even though the \cmd{pdfetex} program was
%      being used.  This year, as promised, we undid that compatibility
%      measure.  So if your document uses \verb|\ifx\pdfoutput\undefined|
%      to test if PDF is being output, it will need to be changed.  You
%      can use the package \pkg{ifpdf.sty} (which works under both
%      plain \TeX\ and \LaTeX) to do this, or steal its logic.
%
%\item Last year, we changed most formats to output (8-bit) characters as
%      themselves (see previous section).  The new TCX file
%      \filename{empty.tcx} now provides an easier way to get the
%      original \verb|^^| notation if you so desire, as in:
%\begin{verbatim}
%latex --translate-file=empty.tcx yourfile.tex
%\end{verbatim}
%
%\item The new program \cmd{dvipdfmx} is included for translation of
%      DVI to PDF; this is an actively maintained update of
%      \cmd{dvipdfm} (which is also still available for now, though
%      no longer recommended).
%
%\item The new programs \cmd{pdfopen} and \cmd{pdfclose} are included
%      to allow reloading of PDF files in the Adobe Acrobat Reader without
%      restarting the program.  (Other PDF readers, notably \cmd{xpdf},
%      \cmd{gv}, and \cmd{gsview}, have never suffered from this
%      problem.)
%
%\item For consistency, the variables \code{HOMETEXMF} and
%      \code{VARTEXMF} have been renamed to \code{TEXMFHOME} and
%      \code{TEXMFSYSVAR}, respectively.  There is also
%      \code{TEXMFVAR}, which is by default user-specific.  See the
%      first point above.
%
%\end{itemize}
%
%
%\subsubsection{2006--2007}
%
%In 2006--2007, the major new addition to \TL{} was the \XeTeX{} program,
%available as the \texttt{xetex} and \texttt{xelatex} programs; see
%\url{http://scripts.sil.org/xetex}.
%
%MetaPost also received a notable update, with more planned for the
%future (\url{http://tug.org/metapost/articles}), likewise pdf\TeX{}
%(\url{http://tug.org/applications/pdftex}).
%
%The \TeX\ \filename{.fmt} (high-speed format) and the similar files for
%MetaPost and \MF\ are now stored in subdirectories of \dirname{texmf/web2c},
%instead of in the directory itself (although the directory is still
%searched, for the sake of existing \filename{.fmt}'s).  The
%subdirectories are named for the `engine' in use, such as \filename{tex}
%or \filename{pdftex} or \filename{xetex}.  This change should be
%invisible in normal use.
%
%The (plain) \texttt{tex} program no longer reads \texttt{\%\&} first
%lines to determine what format to run; it is the pure Knuthian \TeX.
%(\LaTeX\ and everything else do still read \texttt{\%\&} lines).
%
%Of course the year also saw (the usual) hundreds of other updates to
%packages and programs.  As usual, please check CTAN
%(\url{http://mirror.ctan.org}) for updates.
%
%Internally, the source tree is now stored in Subversion, with a standard
%web interface for viewing the tree, as linked from our home page.
%Although not visible in the final distribution, we expect this will
%provide a stable development foundation for future years.
%
%Finally, in May 2006 Thomas Esser announced that he would no longer be
%updating te\TeX{} (\url{http://tug.org/tetex}).  As a result, there was
%a surge of interest in \TL{}, especially among \GNU/Linux
%distributors.  (There is a new \texttt{tetex} installation scheme in
%\TL{}, which provides an approximate equivalent.)  We hope this will
%eventually translate to improvements in the \TeX\ environment for
%everyone.
%
%\subsubsection{2008}
%
%In 2008, the entire \TL{} infrastructure was redesigned and
%reimplemented.  Complete information about an installation is now stored
%in a plain text file \filename{tlpkg/texlive.tlpdb}.
%
%Among other things, this finally makes possible upgrading a \TL{}
%installation over the Internet after the initial installation, a feature
%MiK\TeX\ has provided for many years.  We expect to regularly update new
%packages as they are released to \CTAN.
%
%The major new engine Lua\TeX\ (\url{http://luatex.org}) is included;
%besides a new level of flexibility in typesetting, this provides an
%excellent scripting language for use both inside and outside of \TeX\
%documents.
%
%Support among Windows and the Unix-based platforms is now much more
%uniform.  In particular, most Perl and Lua scripts are now available on
%Windows, using the Perl internally distributed with \TL.
%
%The new \cmd{tlmgr} script (section~\ref{sec:tlmgr}) is the
%general interface for managing \TL{} after the initial installation.
%It handles package updates and consequent regeneration of formats, map
%files, and language files, optionally including local additions.
%
%With the advent of \cmd{tlmgr}, the \cmd{texconfig} actions to
%edit the format and hyphenation configuration files are now disabled.
%
%The \cmd{xindy} indexing program
%(\url{http://xindy.sourceforge.net/}) is now included on most platforms.
%
%The \cmd{kpsewhich} tool can now report all matches for a given file
%(option \optname{--all}) and limit matches to a given subdirectory
%(option \optname{--subdir}).
%
%The \cmd{dvipdfmx} program now includes functionality to extract
%bounding box information, via the command name \cmd{extractbb}; this
%was one of the last features provided by \cmd{dvipdfm} not in
%\cmd{dvipdfmx}.
%
%The font aliases \filename{Times-Roman}, \filename{Helvetica}, and so on
%have been removed.  Different packages expected them to behave
%differently (in particular, to have different encodings), and there was
%no good way to resolve this.
%
%The \pkg{platex} format has been removed, to resolve a name conflict
%with a completely different Japanese \pkg{platex}; the
%\pkg{polski} package is now the main Polish support.
%
%Internally, the \WEB\ string pool files are now compiled into the
%binaries, to ease upgrades.
%
%Finally, the changes made by Donald Knuth in his `\TeX\ tuneup of 2008'
%are included in this release.  See
%\url{http://tug.org/TUGboat/Articles/tb29-2/tb92knut.pdf}.
%
%\subsubsection{2009}
%
%In 2009, the default output format for Lua\AllTeX\ is now PDF, to take
%advantage of Lua\TeX's OpenType support, et al.  New executables named
%\code{dviluatex} and \code{dvilualatex} run Lua\TeX\ with DVI output.
%The Lua\TeX\ home page is \url{http://luatex.org}.
%
%The original Omega engine and Lambda format have been excised, after
%discussions with the Omega authors.  The updated Aleph and Lamed remain,
%as do the Omega utilities.
%
%A new release of the AMS \TypeI\ fonts is included, including Computer
%Modern: a few shape changes made over the years by Knuth in the Metafont
%sources have been integrated, and the hinting has been updated.  The
%Euler fonts have been thoroughly reshaped by Hermann Zapf (see
%\url{http://tug.org/TUGboat/Articles/tb29-2/tb92hagen-euler.pdf}).  In
%all cases, the metrics remain unchanged.  The AMS fonts home page is
%\url{http://www.ams.org/tex/amsfonts.html}.
%
%The new \GUI{} front end \TeX{}works is included for Windows, and also in
%Mac\TeX.  For other platforms, and more information, see the \TeX{}works
%home page, \url{http://tug.org/texworks}.  It is a cross-platform front
%end inspired by the \MacOSX\ TeXShop editor, aiming at ease-of-use.
%
%The graphics program Asymptote is included for several platforms.  This
%implements a text-based graphics description language vaguely akin to
%MetaPost, but with advanced 3D support and other features.  Its home
%page is \url{http://asymptote.sourceforge.net}.
%
%The separate \code{dvipdfm} program has been replaced by
%\code{dvipdfmx}, which operates in a special compatibility mode under
%that name.  \code{dvipdfmx} includes CJK support and has
%accumulated many other fixes over the years since the last
%\code{dvipdfm} release.
%
%Executables for the \pkg{cygwin} and \pkg{i386-netbsd} platforms
%are now included, while we were advised that OpenBSD users get
%\TeX\ through their package systems, plus there were difficulties in
%making binaries that have a chance of working on more than one version.
%
%A miscellany of smaller changes: we now use \pkg{xz} compression,
%the stable replacement for \pkg{lzma}
%(\url{http://tukaani.org/xz/}); a literal |$| is allowed in filenames
%when it does not introduce a known variable name; the Kpathsea library
%is now multi-threaded (made use of in MetaPost); the entire \TL{} build
%is now based on Automake.
%
%Final note on the past: all releases of \TL{}, along with ancillary
%material such as \CD\ labels, are available at
%\url{ftp://tug.org/historic/systems/texlive}.
%
%
%\subsubsection{2010}
%\label{sec:2010news} % keep with 2010
%
%In 2010, the default version for PDF output is now 1.5, enabling more
%compression.  This applies to all the \TeX\ engines when used to produce
%PDF and to \code{dvipdfmx}.  Loading the \pkg{pdf14} \LaTeX\ package
%changes back to PDF~1.4, or set |\pdfminorversion=4|.
%
%pdf\AllTeX\ now \emph{automatically} converts a requested Encapsulated
%PostScript (EPS) file to PDF, via the \pkg{epstopdf} package, when
%and if the \LaTeX\ \code{graphics.cfg} configuration file is loaded, and
%PDF is being output.  The default options are intended to eliminate any
%chance of hand-created PDF files being overwritten, but you can also
%prevent \code{epstopdf} from being loaded at all by putting
%|\newcommand{\DoNotLoadEpstopdf}{}| (or |\def...|) before the
%\cs{documentclass} declaration.  It is also not loaded if the
%\pkg{pst-pdf} package is used.  For more details, see the
%\pkg{epstopdf} package documentation
%(\url{http://ctan.org/pkg/epstopdf-pkg}).
%
%A related change is that execution of a very few external commands from
%\TeX, via the \cs{write18} feature, is now enabled by default.  These
%commands are \code{repstopdf}, \code{makeindex}, \code{kpsewhich},
%\code{bibtex}, and \code{bibtex8}; the list is defined in
%\code{texmf.cnf}.  Environments which must disallow all such external
%commands can deselect this option in the installer (see
%section~\ref{sec:options}), or override the value after installation by
%running |tlmgr conf texmf shell_escape 0|.
%
%Yet another related change is that \BibTeX\ and Makeindex now refuse to
%write their output files to an arbitrary directory (like \TeX\ itself),
%by default.  This is so they can now be enabled for use by the
%restricted \cs{write18}.  To change this, the \code{TEXMFOUTPUT}
%environment variable can be set, or the |openout_any| setting changed.
%
%\XeTeX\ now supports margin kerning along the same lines as pdf\TeX.
%(Font expansion is not presently supported.)
%
%By default, \prog{tlmgr} now saves one backup of each package updated
%(\code{tlmgr option autobackup 1}), so broken package updates can be
%easily reverted with \code{tlmgr restore}.  If you do post-install
%updates, and don't have the disk space for the backups, run \code{tlmgr
%option autobackup 0}.
%
%New programs included: the p\TeX\ engine and related utilities for
%typesetting Japanese; the \BibTeX{}U program for Unicode-enabled
%\BibTeX; the \prog{chktex} utility
%(\url{http://baruch.ev-en.org/proj/chktex}) for checking \AllTeX\
%documents; the \prog{dvisvgm} (\url{http://dvisvgm.sourceforge.net})
%DVI-to-SVG translator.
%
%Executables for these new platforms are now included: \code{amd64-freebsd},
%\code{amd64-kfreebsd}, \code{i386-freebsd}, \code{i386-kfreebsd},
%\code{x86\_64-darwin}, \code{x86\_64-solaris}.
%
%A change in \TL{} 2009 that we failed to note: numerous \TeX4ht-related
%executables (\url{http://tug.org/tex4ht}) were removed from the binary
%directories.  The generic \code{mk4ht} program can be used to run any of
%the various \code{tex4ht} combinations.
%
%Finally, the \TL{} release on the \TK\ \DVD\ can no longer be run live
%(oddly enough).  A single \DVD\ no longer has enough room.  One
%beneficial side effect is that installation from the physical \DVD\ is
%much faster.
%
%\subsubsection{2011}
%
%The \MacOSX\ binaries (\code{universal-darwin} and
%\code{x86\_64-darwin}) now work only on Leopard or later; Panther and
%Tiger are no longer supported.
%
%The \code{biber} program for bibliography processing is included on
%common platforms.  Its development is closely coupled with the
%\code{biblatex} package, which completely reimplements the
%bibliographical facilities provided by LaTeX.
%
%The MetaPost (\code{mpost}) program no longer creates or uses
%\code{.mem} files.  The needed files, such as \code{plain.mp}, are
%simply read on every run.  This is related to supporting MetaPost as a
%library, which is another significant though not user-visible change.
%
%The \code{updmap} implementation in Perl, previously used only on
%Windows, has been revamped and is now used on all platforms.  There
%shouldn't be any user-visible changes as a result, except that it runs
%much faster.
%
%The \cmd{initex} and \cmd{inimf} programs were restored (but no
%other \cmd{ini*} variants).
%
%\subsubsection{2012}
%
%\code{tlmgr} supports updates from multiple network repositories.  The
%section on multiple repositories in the \code{tlmgr help} output has
%more.
%
%The parameter \cs{XeTeXdashbreakstate} is set to~1 by default, for both
%\code{xetex} and \code{xelatex}.  This allows line breaks after
%em-dashes and en-dashes, which has always been the behavior of plain
%\TeX, \LaTeX, Lua\TeX, etc.  Existing \XeTeX\ documents which must
%retain perfect line-break compatibility will need to set
%\cs{XeTeXdashbreakstate} to~0 explicitly.
%
%The output files generated by \code{pdftex} and \code{dvips}, among
%others, can now exceed 2 gigabytes.
%
%The 35 standard PostScript fonts are included in the output of
%\code{dvips} by default, since so many different versions of them are
%extant.
%
%In the restricted \cs{write18} execution mode, set by default,
%\code{mpost} is now an allowed program.
%
%A \code{texmf.cnf} file is also found in \filename{../texmf-local},
%e.g., \filename{/usr/local/texlive/texmf-local/web2c/texmf.cnf}, if it
%exists.
%
%The \code{updmap} script reads a per-tree \code{updmap.cfg} instead of
%one global config.  This change should be invisible, unless you edited
%your updmap.cfg's directly.  The \verb|updmap --help| output has more.
%
%Platforms: \pkg{armel-linux} and \pkg{mipsel-linux} added;
%\pkg{sparc-linux} and \pkg{i386-netbsd} are no longer in the
%main distribution.
%
%\subsubsection{2013}
%
%Distribution layout: the top-level \code{texmf/} directory has been
%merged into \code{texmf-dist/}, for simplicity.  Both the
%\code{TEXMFMAIN} and \code{TEXMFDIST} Kpathsea variables now point to
%\code{texmf-dist}.
%
%Many small language collections have been merged together, to simplify
%installation.
%
%\MP: native support for PNG output and floating-point (IEEE double) has
%been added.
%
%Lua\TeX: updated to Lua 5.2, and includes a new library
%(\code{pdfscanner}) to process external PDF page content, among much
%else (see its web pages).
%
%\XeTeX\ (also see its web pages for more):
%\begin{itemize*}
%\item The HarfBuzz library is now used for font layout instead of
%ICU.  (ICU is still used to support input encodings, bidirectionality,
%and the optional Unicode line breaking.)
%\item Graphite2 and HarfBuzz are used instead of SilGraphite for Graphite
%layout.
%\item On Macs, Core Text is used instead of the (deprecated) ATSUI.
%\item Prefer TrueType/OpenType fonts to Type1 when the names are the same.
%\item Fix occasional mismatch in font finding between \XeTeX\ and
%\code{xdvipdfmx}.
%\item Support OpenType math cut-ins.
%\end{itemize*}
%
%\cmd{xdvi}: now uses FreeType instead of \code{t1lib} for rendering.
%
%\pkg{microtype.sty}: some support for \XeTeX\ (protrusion) and
%Lua\TeX\ (protrusion, font expansion, tracking), among other
%enhancements.
%
%\cmd{tlmgr}: new \code{pinning} action to ease configuring multiple
%repositories; that section in \verb|tlmgr --help| has more, online at
%\url{http://tug.org/texlive/doc/tlmgr.html#MULTIPLE-REPOSITORIES}.
%
%Platforms: \pkg{armhf-linux}, \pkg{mips-irix},
%\pkg{i386-netbsd}, and \pkg{amd64-netbsd} added or revived;
%\pkg{powerpc-aix} removed.
%
%\subsubsection{2014}
%
%2014 saw another \TeX\ tune-up from Knuth; this affected all engines,
%but the only visible change likely is the restoration of the
%\code{preloaded format} string on the banner line.  Per Knuth, this now
%reflects the format that \emph{would} be loaded by default, rather than
%an undumped format that is actually preloaded in the binary; it may be
%overridden in various ways.
%
%pdf\TeX: new warning-suppression parameter
%\cs{pdfsuppresswarningpagegroup}; new primitives for fake interword
%spaces to help with PDF text reflowing: \cs{pdfinterwordspaceon},
%\cs{pdfinterwordspaceoff}, \cs{pdffakespace}.
%
%Lua\TeX: Notable changes and fixes were made to font loading and
%hyphenation.  The biggest addition is a new engine variant,
%\code{luajittex} (\url{http://foundry.supelec.fr/projects/luajittex})
%and its siblings \code{texluajit} and \code{texluajitc}.  This uses a
%just-in-time Lua compiler (detailed \textsl{TUGboat} article at
%\url{http://tug.org/TUGboat/tb34-1/tb106scarso.pdf}).  \code{luajittex}
%is still in development, is not available on all platforms, and is
%considerably less stable than \code{luatex}.  Neither we nor its
%developers recommend using it except for the specific purpose of
%experimenting with jit on Lua code.
%
%\XeTeX: The same image formats are now supported on all platforms
%(including Mac); avoid Unicode compatibility decomposition fallback (but
%not other variants); prefer OpenType to Graphite fonts, for
%compatibility with previous \XeTeX\ versions.
%
%\MP: A new numbersystem \code{decimal} is supported, along with a
%companion internal \code{numberprecision}; a new definition of
%\code{drawdot} in \filename{plain.mp}, per Knuth; bug fixes in
%SVG and PNG output, among others.
%
%The \cmd{pstopdf} Con\TeX{}t utility will be removed as a standalone
%command at some point after the release, due to conflicts with OS
%utilities of the same name.  It can still (and now) be invoked as
%\code{mtxrun --script pstopdf}.
%
%\cmd{psutils} has been substantially revised by a new maintainer.
%As a result, several seldom-used utilities (\code{fix*}, \code{getafm},
%\code{psmerge}, \code{showchar}) are now only in the \dirname{scripts/}
%directory rather than being user-level executables (this can be reversed
%if it turns out to be problematic).  A new script, \code{psjoin}, has
%been added.
%
%The Mac\TeX\ redistribution of \TeX\ Live (section~\ref{sec:macos}) no
%longer includes the optional Mac-only packages for the Latin Modern and
%\TeX\ Gyre fonts, since it is easy enough for individual users to make
%them available to the system.  The \cmd{convert} program from
%ImageMagick has also been excised, since \TeX4ht (specifically
%\code{tex4ht.env}) now uses Ghostscript directly.
%
%The \pkg{langcjk} collection for Chinese, Japanese, and Korean
%support has been split into individual language collections for the sake
%of more moderate sizes.
%
%Platforms: \pkg{x86\_64-cygwin} added, \pkg{mips-irix} removed;
%Microsoft no longer supports Windows XP, so our programs may
%start failing there at any time.
%
%\subsubsection{2015}
%
%\LaTeXe\ now incorporates, by default, changes previously included only
%by explicitly loading the \pkg{fixltx2e} package, which is now a
%no-op.  A new \pkg{latexrelease} package and other mechanisms allow
%for controlling what is done.  The included \LaTeX\ News \#22 and
%``\LaTeX\ changes'' documents have details.  Incidentally, the
%\pkg{babel} and \pkg{psnfss} packages, while core parts of
%\LaTeX, are maintained separately and are not affected by these changes
%(and should still work).
%
%Internally, \LaTeXe\ now includes Unicode-related engine configuration
%(what characters are letters, naming of primitives, etc.) which was
%previously part of \TeX\ Live.  This change is intended to be invisible
%to users; a few low-level internal control sequences have been renamed
%or removed, but the behavior should be just the same.
%
%pdf\TeX: Support JPEG Exif as well as JFIF; do not
%emit a warning if \cs{pdfinclusionerrorlevel} is negative; sync
%with \prog{xpdf}~3.04.
%
%Lua\TeX: New library \pkg{newtokenlib} for scanning tokens; bug
%fixes in the \code{normal} random number generator and other places.
%
%\XeTeX: Image handling fixes; \prog{xdvipdfmx} binary looked for first
%as a sibling to \prog{xetex}; internal \code{XDV} opcodes changed.
%
%MetaPost: New numbersystem \code{binary}; new Japanese-enabled
%\prog{upmpost} and \prog{updvitomp} programs, analogous to
%\prog{up*tex}.
%
%Mac\TeX: Updates to the included Ghostscript package for CJK
%support.  The \TeX\ Distribution Preference Pane now works in Yosemite
%(\MacOSX~10.10).  Resource-fork font suitcases (generally without an
%extension) are no longer supported by \XeTeX; data-fork suitcases
%(\code{.dfont}) remain supported.
%
%Infrastructure: The \prog{fmtutil} script has been reimplemented to read
%\filename{fmtutil.cnf} on a per-tree basis, analogous to \prog{updmap}.
%Web2C \prog{mktex*} scripts (including \prog{mktexlsr}, \prog{mktextfm},
%\prog{mktexpk}) now prefer programs in their own directory, instead of
%always using the existing \code{PATH}.
%
%Platforms: \pkg{*-kfreebsd} removed, since \TeX\ Live is now easily
%available through the system platform mechanisms.
%Support for some additional platforms is available as custom binaries
%(\url{http://tug.org/texlive/custom-bin.html}).  In addition, some
%platforms are now omitted from the \DVD\ (simply to save space), but can
%be installed normally over the net.
%
%% 
%\subsubsection{2016}
%
%Lua\TeX: Sweeping changes to primitives, both renames and removals,
%along with some node structure rearrangements.  The changes are
%summarized in an article by Hans Hagen, ``Lua\TeX\ 0.90 backend changes
%for PDF and more''
%(\url{http://tug.org/TUGboat/tb37-1/tb115hagen-pdf.pdf}); for all the
%details, see the Lua\TeX\ manual,
%\OnCD{texmf-dist/doc/luatex/base/luatex.pdf}.
%
%Metafont: New highly experimental sibling programs MFlua and MFluajit,
%integrating Lua with \MF, for trial testing purposes.
%
%MetaPost: Bug fixes and internal preparations for MetaPost 2.0.
%
%\code{SOURCE\_DATE\_EPOCH} support in all engines except Lua\TeX\ (which
%will come in the next release) and original \code{tex} (intentionally
%omitted): if the environment variable \code{SOURCE\_DATE\_EPOCH} is set,
%its value is used for timestamps in the PDF output.  If
%\code{SOURCE\_DATE\_EPOCH\_TEX\_PRIMITIVES} is also set, the
%\code{SOURCE\_DATE\_EPOCH} value is used to initialize the \TeX\
%primitives \cs{year}, \cs{month}, \cs{day}, \cs{time}.  The pdf\TeX\
%manual has examples and details.
%
%pdf\TeX: new primitives \cs{pdfinfoomitdate}, \cs{pdftrailerid},
%\cs{pdfsuppressptexinfo}, to control values appearing in the output
%which normally change with each run.  These features are for PDF output
%only, not DVI.
%
%Xe\TeX: New primitives \cs{XeTeXhyphenatablelength},
%\cs{XeTeXgenerateactualtext},\\ \cs{XeTeXinterwordspaceshaping},
%\cs{mdfivesum}; character class limit increased to 4096; DVI id byte
%incremented.
%
%Other utilities:
%\begin{itemize*}
%\item \code{gregorio} is a new program, part of the \code{gregoriotex}
%package for typesetting Gregorian chant scores; it is included in
%\code{shell\_escape\_commands} by default.
%
%\item \code{upmendex} is an index creation program, mostly compatible
%with \code{makeindex}, with support for Unicode sorting, among other
%changes.
%
%\item \code{afm2tfm} now makes only accent-based height adjustments
%upward; a new option \code{-a} omits all adjustments.
%
%\item \code{ps2pk} can handle extended PK/GF fonts.
%\end{itemize*}
%
%Mac\TeX: The \TeX\ Distribution Preference Pane is gone; its
%functionality is now in TeX Live Utility; bundled GUI applications
%upgraded; new script \code{cjk-gs-integrate} to be run by users who wish
%to incorporate various CJK fonts into Ghostscript.
%
%Infrastructure: System-level \code{tlmgr} configuration file supported;
%verify package checksums; if GPG is available, verify signature of
%network updates.  These checks happen with both the installer and
%\code{tlmgr}.  (If GPG is not available, updates proceed as usual.)
%
%Platforms: \code{alpha-linux} and \code{mipsel-linux} removed.
%
%% 
%\subsubsection{2017}
%
%Lua\TeX: More callbacks, more typesetting control, more access to
%internals; \code{ffi} library for dynamic code loading added on some
%platforms.
%
%pdf\TeX: Environment variable |SOURCE_DATE_EPOCH_TEX_PRIMITIVES| from
%last year renamed to |FORCE_SOURCE_DATE|, with no changes in
%functionality; if the \cs{pdfpageattr} token list contains the string
%\code{/MediaBox}, omit output of the default \code{/MediaBox}.
%
%Xe\TeX: Unicode/OpenType math now based on HarfBuzz's MATH table support;
%some bug fixes.
%
%Dvips: Make the last papersize special win, for consistency with
%\code{dvipdfmx} and package expectations; the \code{-L0} option (\code{L0}
%config setting) restores the previous behavior of the first special
%winning.
%
%ep\TeX, eup\TeX: New primitives \cs{pdfuniformdeviate},
%\cs{pdfnormaldeviate}, \cs{pdfrandomseed}, \cs{pdfsetrandomseed},
%\cs{pdfelapsedtime}, \cs{pdfresettimer}, from pdf\TeX.
%
%Mac\TeX: As of this year, only \MacOSX\ releases for which Apple still
%releases security patches will be supported in Mac\TeX, under the
%platform name |x86_64-darwin|; currently this means Yosemite,
%El~Capitan, and Sierra (10.10 and newer). Binaries for older \MacOSX\
%versions are not included in Mac\TeX, but are still available in \TeX\
%Live (|x86_64-darwinlegacy|, \code{i386-darwin}, \code{powerpc-darwin}).
%
%Infrastructure: The \code{TEXMFLOCAL} tree is now searched before
%\code{TEXMFSYSCONFIG} and \code{TEXMFSYSVAR} (by default); the
%hope is that this will better match expectations of local files
%overriding system files.  Also, \code{tlmgr} has a new mode \code{shell}
%for interactive and scripted use, and a new action \code{conf auxtrees}
%to easily add and remove extra trees.
%
%\code{updmap} and \code{fmtutil}: These scripts now give a warning when
%invoked without explicitly specifying either so-called system mode
%(\code{updmap-sys}, \code{fmtutil-sys}, or option \code{-sys}), or user
%mode (\code{updmap-user}, \code{fmtutil-user}, or option \code{-user}).
%The hope is that this will reduce the perennial problem of invoking user
%mode by accident and thus losing future system updates.  See
%\url{http://tug.org/texlive/scripts-sys-user.html} for details.
%
%\code{install-tl}: Personal paths such as \code{TEXMFHOME} are now
%set to Mac\TeX\ values (|~/Library/...|)\ by default on Macs.  New
%option \code{-init-from-profile} to start an installation with the
%values from a given profile; new command \code{P} to explicitly save a
%profile; new profile variable names (but previous ones are still
%accepted).
%
%Sync\TeX: the name of the temporary file now looks like
%\code{foo.synctex(busy)}, instead of \code{foo.synctex.gz(busy)}
%(no~\code{.gz}). Front ends and build systems that want to remove temp
%files may need adjusting.
%
%Other utilities: \code{texosquery-jre8} is a new cross-platform program
%for retrieving locale and other OS information from a \TeX\ document; it
%is included in |shell_escape_commands| by default for restricted
%shell execution. (Older JRE versions are supported by texosquery, but
%cannot be enabled in restricted mode, as they are no longer supported by
%Oracle, even for security issues.)
%
%Platforms: See Mac\TeX\ entry above; no other changes.
%
%% 
%\subsubsection{2018}
%
%Kpathsea: Case-insensitive filename matching now done by default in
%non-system directories; set \code{texmf.cnf} or environment variable
%\code{texmf\_casefold\_search} to~\code{0} to disable.
%Full details in the Kpathsea manual (\url{http://tug.org/kpathsea}).
%
%ep\TeX, eup\TeX: New primitive \cs{epTeXversion}.
%
%Lua\TeX: Preparation for moving to Lua 5.3 in 2019: a binary
%\code{luatex53} is available on most platforms, but must be renamed to
%\code{luatex} to be effective. Or use the \ConTeXt\ Garden
%(\url{http://wiki.contextgarden.net}) files; more information there.
%
%MetaPost: Fixes for wrong path directions, TFM and PNG output.
%
%pdf\TeX: Allow encoding vectors for bitmap fonts; current directory not
%hashed into PDF ID; bug fixes for \cs{pdfprimitive} and related.
%
%Xe\TeX: Support \code{/Rotate} in PDF image inclusion; exit nonzero if
%the output driver fails; various obscure UTF-8 and other primitive
%fixes.
%
%Mac\TeX: See version support changes below. In addition, the files
%installed in \code{/Applications/TeX/} by Mac\TeX\ have been reorganized for
%greater clarity; now this location contains four GUI programs (BibDesk,
%LaTeXiT, TeX Live Utility, and TeXShop) at the top level and folders
%with additional utilities and documentation.
%
%\code{tlmgr}: new front-ends \code{tlshell} (Tcl/Tk) and
%\code{tlcockpit} (Java); JSON output; \code{uninstall} now a synonym
%for \code{remove}; new action/option \code{print-platform-info}.
%
%Platforms:
%\begin{itemize*}
%\item 
%Removed: \code{armel-linux}, \code{powerpc-linux}.
%
%\item \code{x86\_64-darwin} supports 10.10--10.13
%(Yosemite, El~Capitan, Sierra, and High~Sierra).
%
%\item \code{x86\_64-darwinlegacy} supports 10.6--10.10 (though
%\code{x86\_64-darwin} is preferred for 10.10).  All support for 10.5
%(Leopard) is gone, that is, both the \code{powerpc-darwin} and
%\code{i386-darwin platforms} have been removed.
%
%\item Windows: XP is no longer supported.
%\end{itemize*}
%
%
%\htmlanchor{news}
%\subsection{Present: 2019}
%\label{sec:tlcurrent}
%
%Kpathsea: More consistent brace expansion and path splitting; new
%variable \code{TEXMFDOTDIR} instead of hard-coded \code{.}\ in paths
%allows for easily searching additional or sub-directories (see comments
%in \code{texmf.cnf}).
%
%ep\TeX, eup\TeX: New primitives \cs{readpapersizespecial} and
%\cs{expanded}.
%
%Lua\TeX: Lua 5.3 now used, with concomitant arithmetic and interface changes.
%The homegrown library pplib is used to read pdf files, thus
%eliminating the dependency on poppler (and the need for C++);
%Lua interface changed accordingly.
%
%MetaPost: \code{r-mpost} command name recognized as an
%alias for invocation with the \code{--restricted} option, and added to
%the list of restricted commands available by default.
%Minimum precision now 2 for decimal and binary mode.
%Binary mode no longer available in MPlib but still available in
%standalone MetaPost.
%
%pdf\TeX: New primitive \cs{expanded}; if new primitive parameter
%\cs{pdfomitcharset} is set to 1, the \code{/CharSet} string
%omitted from the PDF output, since it cannot feasibly be guaranteed
%correct, as required by PDF/A-2 and PDF/A-3.
%
%Xe\TeX: New primitives \cs{expanded},
%\cs{creationdate},
%\cs{elapsedtime},
%\cs{filedump}, 
%\cs{filemoddate}, 
%\cs{filesize}, 
%\cs{resettimer}, 
%\cs{normaldeviate}, 
%\cs{uniformdeviate}, 
%\cs{randomseed}; extend \cs{Ucharcat} to produce active
%characters.
%
%\code{tlmgr}: Support \code{curl} as a download program;
%   use \code{lz4} and gzip before \code{xz} for local backups, if available;
%   prefer system-provided binaries over binaries provided with \TL\ for
%   compressor and download programs, unless the environment variable
%   \code{TEXLIVE\_PREFER\_OWN} is set.
%
%\code{install-tl}: New option \code{-gui} (with no argument) is the
%default on Windows and Macs, and invokes a new Tcl/TK GUI (see
%sections~\ref{sec:basic} and~\ref{sec:graphical-inst}).
%
%Utilities:
%\begin{itemize*}
%\item \code{cwebbin} (\url{https://ctan.org/pkg/cwebbin}) is now the CWEB
%implementation in \TeX\ Live, with support for more language dialects,
%and including the \code{ctwill} program to make mini-indexes.
%
%\item \code{chkdvifont}: report font information from \DVI{} files, also
%from tfm/ofm, vf, gf, pk.
%
%\item \code{dvispc}: make a DVI file page-independent with respect to specials.
%\end{itemize*}
%
%Mac\TeX: \code{x86\_64-darwin} now supports 10.12 and higher (Sierra,
%High Sierra, Mojave); \code{x86\_64-darwinlegacy} still supports 10.6
%and newer. The spell checker Excalibur is no longer included, since it
%requires 32-bit support.
%
%Platforms: removed \code{sparc-solaris}.
%
%
%\subsection{Future}
%
%\TL{} is not perfect, and never will be.  We intend to continue to
%release new versions, and would like to provide more documentation, more
%programs, an ever-improved and better-checked tree of macros and fonts,
%and anything else \TeX. This work is all done by volunteers in their
%spare time, and so there is always more to do.  Please see
%\url{http://tug.org/texlive/contribute.html}.
%
%Please send corrections, suggestions, and offers of help to:
%\begin{quote}
%\email{tex-live@tug.org} \\
%\url{http://tug.org/texlive}
%\end{quote}
%
%\medskip
%\noindent \textsl{Happy \TeX ing!}

\end{document}
